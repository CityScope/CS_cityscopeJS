{"version":3,"sources":["theme/GlobalStyles.js","theme/typography.js","theme/index.js","layouts/MainLayout/NavBar/NavItem.js","layouts/MainLayout/NavBar/index.js","layouts/MainLayout/TopBar.js","layouts/MainLayout/index.js","layouts/Page.js","views/Errors/NotFoundView.js","views/GridEditor/EditorMap/EditorBrush.js","redux/actions.js","views/GridEditor/EditorMap/EditorMap.js","views/GridEditor/EditorMenu/TypesEditor/index.js","views/GridEditor/EditorMenu/GridProps/GridMaker/gridCreator.js","views/GridEditor/EditorMenu/GridProps/GridMaker/index.js","views/GridEditor/EditorMenu/GridProps/CommitGrid/index.js","views/GridEditor/EditorMenu/GridProps/CenterMapButton/CenterMapButton.js","views/GridEditor/EditorMenu/GridProps/index.js","views/GridEditor/EditorMenu/index.js","views/GridEditor/index.js","views/CityScopeJS/CityIO/utils.js","views/CityScopeJS/CityIO/cityIO.js","views/CityIOviewer/CityIOdeckGLmap/legoio.png","views/CityIOviewer/CityIOdeckGLmap/SelectedTable/index.js","views/CityIOviewer/CityIOdeckGLmap/index.js","views/CityIOviewer/CityIOlist.js","views/CityIOviewer/SplashScreen/GetGITdate.js","views/CityIOviewer/SplashScreen/index.js","views/CityIOviewer/index.js","redux/initialState.js","views/CityScopeJS/CityIO/LoadingSpinner/index.js","redux/reducer.js","redux/store.js","utils/utils.js","views/CityScopeJS/MenuContainer/EditMenu/TypeInfo.js","views/CityScopeJS/MenuContainer/EditMenu/index.js","views/CityScopeJS/MenuContainer/TogglesMenu/ABMSubmenu/styles.js","views/CityScopeJS/MenuContainer/TogglesMenu/ABMSubmenu/ABMLegend.js","views/CityScopeJS/MenuContainer/TogglesMenu/ABMSubmenu/index.js","views/CityScopeJS/MenuContainer/TogglesMenu/ShadowSubmenu/styles.js","views/CityScopeJS/MenuContainer/TogglesMenu/ShadowSubmenu/index.js","views/CityScopeJS/MenuContainer/TogglesMenu/AccessSubmenu/index.js","views/CityScopeJS/MenuContainer/TogglesMenu/index.js","views/CityScopeJS/MenuContainer/SaveMenu/components/SaveAsScenario/index.js","views/CityScopeJS/MenuContainer/SaveMenu/components/ScenarioItems/index.js","views/CityScopeJS/MenuContainer/SaveMenu/index.js","views/CityScopeJS/MenuContainer/index.js","views/CityScopeJS/DeckglMap/components/PaintBrush/PaintBrush.js","views/CityScopeJS/DeckglMap/components/CellMeta.js","views/CityScopeJS/DeckglMap/components/PaintBrush/index.js","views/CityScopeJS/DeckglMap/components/AnimationComponent.js","views/CityScopeJS/DeckglMap/deckglLayers/AccessLayer.js","views/CityScopeJS/DeckglMap/deckglLayers/AggregatedTripsLayer.js","views/CityScopeJS/DeckglMap/deckglLayers/ABMLayer.js","views/CityScopeJS/DeckglMap/deckglLayers/GridLayer.js","views/CityScopeJS/DeckglMap/deckglLayers/TextualLayer.js","views/CityScopeJS/DeckglMap/index.js","views/CityScopeJS/VisContainer/Radar/index.js","views/CityScopeJS/VisContainer/BarChart/index.js","views/CityScopeJS/VisContainer/AreaCalc/index.js","views/CityScopeJS/VisContainer/index.js","views/CityScopeJS/CSjsMain.js","views/CityScopeJS/index.js","views/ProjectionMapping/CityIO/index.js","views/ProjectionMapping/Keystone/PrjDeckGLMap/deckglLayers/AccessLayer.js","views/ProjectionMapping/Keystone/PrjDeckGLMap/deckglLayers/AggregatedTripsLayer.js","views/ProjectionMapping/Keystone/PrjDeckGLMap/deckglLayers/ABMLayer.js","views/ProjectionMapping/Keystone/PrjDeckGLMap/deckglLayers/GridLayer.js","views/ProjectionMapping/Keystone/PrjDeckGLMap/index.js","views/ProjectionMapping/Keystone/Components/util.ts","views/ProjectionMapping/Keystone/Components/anchor.tsx","views/ProjectionMapping/Keystone/Components/Keystoner.tsx","views/ProjectionMapping/Keystone/Components/deleteLocalStorage.js","views/ProjectionMapping/Keystone/index.js","Components/TableNameInput.js","views/ProjectionMapping/UIWebsocket/index.js","views/ProjectionMapping/index.js","routes.js","App.js","redux/Provider.js","index.js"],"names":["useStyles","makeStyles","createStyles","boxSizing","margin","padding","html","height","width","body","backgroundColor","a","textDecoration","GlobalStyles","typography","fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","h1","fontWeight","letterSpacing","h2","h3","h4","h5","h6","overline","theme","createMuiTheme","zIndex","appBar","palette","background","default","paper","dark","primary","main","light","secondary","text","colors","grey","shape","borderRadius","overrides","MuiListItem","root","boxShadow","button","MuiOutlinedInput","notchedOutline","borderColor","MuiAppBar","colorPrimary","color","MuiDivider","opacity","MuiCard","MuiButton","item","display","paddingTop","paddingBottom","justifyContent","textTransform","icon","marginRight","spacing","title","active","fontWeightBold","NavItem","className","href","Icon","rest","classes","ListItem","clsx","disableGutters","Button","activeClassName","component","RouterLink","to","size","items","MapIcon","BarChartIcon","FormatShapesIcon","mobileDrawer","top","NavBar","openNavDrawer","onMobileNavOpen","content","Box","flexDirection","p","List","map","style","onClick","flexGrow","Card","elevation","CardContent","position","Fab","Typography","align","variant","Date","getFullYear","Drawer","anchor","open","defaultProps","onMobileClose","TopBar","AppBar","Toolbar","IconButton","name","overflow","flex","MainLayout","useState","navMenuState","setNavMenuState","Page","forwardRef","ref","children","Helmet","image","marginTop","maxWidth","NotFoundView","Container","SelectionTarget","props","mousePos","selectedType","divSize","colorTrans","mouseX","clientX","mouseY","clientY","border","mouseDown","pointerEvents","left","GET_CITYIO_DATA","getCityioData","data","type","LISTEN_TO_MAP_EVENTS","LISTEN_TO_ABM_SLIDERS","listenToSlidersEvents","LISTEN_TO_ABM_MODE","LISTEN_TO_ACCESS_TOGGLE","MENU_INTERACTION","LISTEN_TO_EDIT_MENU","listenToEditMenu","SET_READY_STATE","setReadyState","SET_LOADING_STATE","setLoadingState","SET_SCENARIO_NAMES","setScenarioNames","ADD_LOADING_MODULES","addLoadingModules","REMOVE_LOADING_MODULES","removeLoadingModules","SET_UI_WEBSOCKET_DATA","SET_UI_WEBSOCKET_READY","LISTEN_TO_GRID_CREATOR","listenToGridCreator","LISTEN_TO_ROW_EDIT","listenToRowEdits","LISTEN_TO_TYPES_LIST","LISTEN_TO_BASE_MAP_CENTER","listenToBaseMapCenter","_hexToRgb","hex","result","exec","parseInt","BaseMap","_toggleOrthoView","viewState","orthographic","menu","includes","_onViewStateChange","setState","componentDidUpdate","prevProps","mapCenter","state","latitude","latCenter","longitude","lonCenter","pitch","bearing","_mulipleObjPicked","e","dim","pickingRadius","x","y","deckGL","pickObjects","_handleGridcellEditing","interactive","multiSelectedObj","forEach","selected","thisCellProps","object","properties","selectedCellsState","_renderSelectionTarget","_handleKeyUp","keyDownState","_handleKeyDown","nativeEvent","key","draggingWhileEditing","settings","initialViewState","dirLightSettings","timestamp","UTC","intensity","_shadow","this","_rightClickViewRotate","_setViewStateToTableHeader","GEOGRID","header","zoom","document","getElementById","addEventListener","evt","preventDefault","layers","push","GeoJsonLayer","id","stroked","filled","wireframe","createdGrid","visible","pickable","extruded","lineWidthScale","lineWidthMinPixels","getElevation","d","getFillColor","event","cellInfo","rightButton","onDrag","onDragStart","onDragEnd","updateTriggers","transitions","onKeyDown","onKeyUp","onMouseMove","onMouseUp","onMouseDown","deck","onViewStateChange","_renderLayers","controller","touchZoom","touchRotate","dragPan","dragRotate","keyboard","reuseMaps","mapboxApiAccessToken","process","mapStyle","sat","preventStyleDiffing","Component","mapDispatchToProps","connect","ROW_EDIT","BASE_MAP_CENTER","GRID_CREATED","TypesEditor","React","columns","field","lookup","No","Web","TUI","LanduseTypesList","typesArray","Object","keys","description","LBCS","JSON","stringify","NAICS","createtypesArray","types","dispatch","useDispatch","selectedRow","setSelectedRow","rowColor","setRowColor","useEffect","Grid","container","xs","s","m","l","xl","options","paging","search","selection","rowStyle","rowData","tableData","onRowClick","row","editable","onRowAdd","newData","Promise","resolve","setTimeout","prevState","onRowUpdate","oldData","indexOf","onRowDelete","console","log","splice","deg_to_rad","deg","Math","PI","rad_to_deg","rad","randomProperty","obj","length","random","GridMaker","reduxState","useSelector","handleGridCreation","grid","gridProps","typesList","top_left_lon","parseFloat","top_left_lat","rotation","userPrj","projection","cell_size","cellSize","nrows","ncols","webMercator","proj4","defs","top_left_lon_lat","lon","lat","Ad","la1","lo1","bearing_rad","la2","asin","sin","cos","top_right_lon_lat","atan2","top_left_xy","top_right_xy","dydx","theta","atan","cosTheta","sinTheta","x_unRot","y_unRot","i","j","x_rot","y_rot","x_rot_trans","y_rot_trans","dxdCol","dydCol","dxdRow","dydRow","gridPnts","geojsonFeatureCollection","features","rndType","geojsonPolygon","geometry","coordinates","polygon_xy","polygon_ll","v","ll","gridCreator","TYPES_LIST","startIcon","makeGEOGRIDobject","struct","geoJsonFeatures","GEOGRID_object","newTypesList","oldType","parse","CommitGrid","reqResonse","setReqResonse","hasGrid","postGridToCityIO","GEOGRIDstruct","GEOGRIDDATA_object","element","makeGEOGRIDDATAobject","tableName","toLowerCase","requestsList","geoGridURL","geoGridDataURL","geoGridOptions","URL","DATA","method","url","headers","Accept","axios","then","response","cityscopeJSendpoint","status","Link","reqResonseUI","catch","error","dataStr","encodeURIComponent","downloadAnchorNode","createElement","setAttribute","appendChild","click","remove","downloadObjectAsJson","CenterMapButton","GridProps","borderWidth","flexWrap","tz","formValues","setformValues","handleChangeForm","target","value","noValidate","autoComplete","TextField","InputProps","onChange","textField","label","defaultValue","inputProps","max","min","helperText","EditorMenu","GridEditor","md","maxHeight","EditorMap","getScenarioIndices","cityIO","baseURL","get","res","scenarioIndices","filter","str","replace","promises","getScenarioName","all","r","err","getAPICall","CityIO","menuState","MENU","cityioData","CITYIO","isEditing","setIsEditing","isEditingRef","useRef","current","hashId","setHashId","hashes","setHashes","cityioURL","update","newHashId","interval","newHashes","loadingModules","pickedModules","cityIOmodules","module","modules","modulesData","reduce","k","timer","clearTimeout","getModules","SelectedTable","clicked","tableURL","CityIOdeckGLmap","markerInfo","setMarkerInfo","setClicked","setZoom","INIT_VIEW","zHeight","viewport","setViewport","setInitialViewState","isHovering","markersArr","cityIOdata","table","index","RND_1","RND_2","tableHeader","coord","from","TileLayer","minZoom","maxZoom","tileSize","renderSubLayers","tile","bbox","west","south","east","north","BitmapLayer","_imageCoordinateSystem","COORDINATE_SYSTEM","CARTESIAN","bounds","LineLayer","getWidth","getSourcePosition","getTargetPosition","getColor","TextLayer","getPosition","getText","getSize","getAngle","getPixelOffset","getTextAnchor","getAlignmentBaseline","IconLayer","iconAtlas","transitionDuration","transitionInterpolator","FlyToInterpolator","iconMapping","marker","mask","getIcon","sizeScale","views","GlobeView","onHover","Boolean","getCursor","isDragging","onViewportChange","ContextProvider","_MapContext","Provider","CityIOlist","tableList","setTableList","isLoading","setIsLoading","fetchCityIOtables","cityIOlistURL","ListOfTables","tablesArr","requestArr","urlStr","split","pop","oldArray","toString","GetGITdate","author","branch","date","sha","link","gitMeta","setGitMeta","fetch","json","commit","divider","SplashScreen","Divider","gutterBottom","CityIOviewer","fixedPosition","LoadingSpinner","LOADING_MODULES","bottom","right","LinearProgress","listOfToggles","toggles","menuInitState","values","showOnInit","initialState","SCENARIO_NAMES","MAP","SLIDERS","time","ABM","startSimHour","currentSimHour","endSimHour","speed","animationSpeed","ABM_MODE","ACCESS_TOGGLE","SELECTED_TYPE","READY","LOADING","reducer","action","Set","UI_WEBSOCKET_DATA","UI_WEBSOCKET_READY","reduxDevTools","window","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","hexToRgb","testHex","hexString","test","_proccessGridData","GEOGRIDDATA","_proccessAccessData","accessData","heatmap","_postMapEditsToCityIO","endPoint","expectUpdateModules","val","expectUpdate","cityIOKeys","getState","has","setSelectedCellsState","deckGLRef","_multipleObjPicked","currentDateMidnight","setHours","_setupSunEffects","effectsRef","ambientLight","AmbientLight","dirLight","_SunLight","lightingEffect","LightingEffect","shadowColor","updateSunDirection","thisLocationTime","getTime","directionalLights","getMonth","getDay","getHours","getMinutes","getSeconds","TypeInfo","COLOR_SCALE","hoveredRadial","setHoveredRadial","typeInfo","attr","angle","proportion","use","careateData","colorType","animation","innerRadius","radialRadius","radius","getLabel","showLabels","onValueMouseOver","onSeriesMouseOut","padAngle","selectedIndex","setSelectedIndex","marks","parseTypeInfo","iconsArr","col","rgbCol","typeHasHeightProps","alignItems","typeProps","ListItemAvatar","Avatar","charAt","ListItemText","Collapse","in","Slider","valueLabelDisplay","getAriaLabel","createTypesIcons","marginLeft","subtitle1","subtitle2","ABMLegend","tripsAttr","trips","tripsData","modes","mode","profiles","profile","tripTypeValue","string","legendData","prepareLegendData","ABMSubmenu","sliders","settripTypeValue","FormControl","RadioGroup","aria-label","FormControlLabel","control","Radio","newValue","aria-labelledby","ShadowSubmenu","AccessSubmenu","accessToggle","ACCESS_PROPERTIES","access","c","startColor","endColor","startTitle","endTitle","ListItemSecondaryAction","Switch","edge","checked","TogglesMenu","handleToggle","togglesMeta","togglesCompsArray","loadedModules","requireModule","thisToggle","displayName","ABM2","SaveAsScenario","setOpen","setName","toggleDrawer","handleClose","scenarioNames","postScenario","info","disabled","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","autoFocus","fullWidth","DialogActions","newScenarioIndex","getScenarioIndex","ScenarioItems","scenario","getScenario","deleteScenario","SaveMenu","MenuContainer","updatedMenuState","PaintBrush","hoveredCells","isInteractiveCell","msg","CellMeta","hoveredObj","PaintBrushContainer","editOn","AnimationComponent","animationFrame","cancelAnimationFrame","_animate","rotateOn","ABMOn","updaters","sunEffects","setViewState","startHour","endHour","t","requestAnimationFrame","bind","AccessLayer","ColumnLayer","shadowEnabled","material","diskResolution","elevationScale","colorRange","getLineColor","AggregatedTripsLayer","ABMmode","PathLayer","getPath","noisePath","path","ABMLayer","zoomLevel","TripsLayer","getTimestamps","timestamps","widthScale","rounded","trailLength","currentTime","GridLayer","setDraggingWhileEditing","setHoveredObj","TextualLayer","textLayerData","infoIteam","Map","setKeyDownState","setMousePos","setMouseDown","setAccess","textualData","setTextualData","setGEOGRID","setABM","loaded","setLoaded","cityioDataState","slidersState","selectedTypeState","ABMmodeState","shadowsOn","resetViewOn","textual","dataProps","layersKey","AGGREGATED_TRIPS","GRID","ACCESS","TEXTUAL","layerOrder","layer","effects","asyncRender","radarSize","Radar","radarData","setRadarData","indicators","f","domains","viz_type","ref_value","domain","createRadarData","polygons","fillOpacity","strokeWidth","axes","fill","labels","textAnchor","stroke","tickValues","Array","BarChart","barChartData","setBarChartData","hoveredNode","setHoveredNode","generateData","dataArr","alignContent","xType","stackBy","yDomain","tickLabelAngle","AreaCalc","areaData","setAreaData","geoGridData","calcAreaObj","gridCellData","typeName","hasOwnProperty","count","area","g","b","valToHex","rgbToHex","radialData","calcArea","labelsRadiusMultiplier","labelsStyle","font","textShadow","VisContainer","CSjsMain","direction","CityScopeJS","setTableName","isDone","setIsdone","location","pre","cityscopePrjName","substring","isReady","HeatmapLayer","radiusPixels","threshold","getWeight","PrjDeckGLMap","viewSettings","localStorage","getItem","vs","setItem","solve","require","transformPointsToMatrix","sourcePoints","targetPoints","n","fromX","fromY","toX","toY","h","num","precision","factor","pow","tempNumber","round","matrixToTransform","matrix","join","vectorToTransform","vector","halfAnchor","styles","cursor","AnchorComponent","translation","onMouseEnter","transform","anchors","defaultMatrix","_setDeltaVal","deltaInitVals","Keystoner","layerTranslateDelta","anchorTranslateDelta","isAnchorDragging","anchorMoving","translateDelta","undefined","transformOrigin","containerTranslate","onAnchorMouseDown","stopPropagation","pageX","pageY","onAnchorMouseMove","vectorIndexToModify","deltaX","deltaY","onAnchorMouseUp","isEditMode","newVector","getBoundingClientRect","ls","removeEventListener","anchorStyle","anchorClassName","DeleteLocalStorage","justify","Keystone","editMode","setEditMode","removeItem","reload","TableNameInput","setSelectedTable","buttonsArr","cityIOtableBaseUrl","strToRemove","start","slice","UIWebsocket","socket","WebSocket","SOCKETS","onopen","send","onmessage","setUIWebsocketReady","setUIWebsocketData","isCityIOready","isSocketUIready","selectedTable","mt","routes","App","routing","useRoutes","ThemeProvider","ProviderWrapper","ReactDOM","render","basename"],"mappings":"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","file":"static/js/main.7db61ea6.chunk.js","sourcesContent":["import { createStyles, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        \"@global\": {\n            \"*\": {\n                boxSizing: \"border-box\",\n                margin: 0,\n                padding: 0,\n            },\n            html: {\n                \"-webkit-font-smoothing\": \"antialiased\",\n                \"-moz-osx-font-smoothing\": \"grayscale\",\n                height: \"100%\",\n                width: \"100%\",\n            },\n            body: {\n                backgroundColor: \"#18191a\",\n                height: \"100%\",\n                width: \"100%\",\n            },\n            a: {\n                textDecoration: \"none\",\n            },\n            \"#root\": {\n                height: \"100%\",\n                width: \"100%\",\n            },\n        },\n    })\n);\n\nconst GlobalStyles = () => {\n    useStyles();\n\n    return null;\n};\n\nexport default GlobalStyles;\n","const typography = {\n    fontFamily: `\"Roboto Mono\", sans-serif`,\n    fontSize: 12,\n    fontWeightLight: 100,\n    fontWeightRegular: 500,\n    fontWeightMedium: 700,\n\n    h1: {\n        fontWeight: 700,\n        fontSize: 45,\n        letterSpacing: \"-1px\",\n    },\n    h2: {\n        fontWeight: 800,\n        fontSize: 29,\n        letterSpacing: \"-0.24px\",\n    },\n    h3: {\n        fontWeight: 700,\n        fontSize: 24,\n        letterSpacing: \"-0.06px\",\n    },\n    h4: {\n        fontWeight: 500,\n        fontSize: 20,\n        letterSpacing: \"-0.06px\",\n    },\n    h5: {\n        fontWeight: 500,\n        fontSize: 16,\n        letterSpacing: \"-0.05px\",\n    },\n    h6: {\n        fontWeight: 500,\n        fontSize: 14,\n        letterSpacing: \"-0.05px\",\n    },\n    overline: {\n        fontWeight: 500,\n    },\n};\n\nexport default typography;\n","import { createMuiTheme, colors } from '@material-ui/core'\nimport typography from './typography'\n\nconst theme = createMuiTheme({\n  zIndex: {\n    appBar: 999,\n  },\n  palette: {\n    background: {\n      default: '#ff5278', //255, 82, 120\n      paper: '#18191a',\n      dark: '#ff5278',\n    },\n    primary: {\n      main: '#FFF',\n      light: '#ff5278',\n    },\n    secondary: {\n      main: '#ff5278',\n    },\n\n    text: {\n      primary: colors.grey[100],\n      secondary: '#ff5278',\n    },\n  },\n\n  typography,\n  shape: {\n    borderRadius: 20,\n  },\n\n  overrides: {\n    MuiListItem: {\n      root: {\n        '&$selected': {\n          backgroundColor: '#18191a',\n          boxShadow:\n            '12px 12px 16px 0 rgba(0,0,0),-8px -8px 12px 0 rgba(40,41,42)',\n          '&:hover': {\n            backgroundColor: '#ff5278',\n          },\n        },\n      },\n      button: {\n        '&:hover': {\n          backgroundColor: '#ff5278',\n        },\n      },\n    },\n\n    MuiOutlinedInput: {\n      notchedOutline: {\n        borderColor: '#ff5278',\n      },\n    },\n    MuiAppBar: {\n      colorPrimary: { backgroundColor: '#18191a', color: '#FFF' },\n    },\n    MuiDivider: {\n      root: {\n        backgroundColor: '#FFF',\n        opacity: 0.1,\n      },\n    },\n    MuiCard: {\n      root: {\n        boxShadow:\n          '12px 12px 16px 0 rgba(0,0,0),-8px -8px 12px 0 rgba(40,41,42)',\n      },\n    },\n    MuiButton: {\n      root: {\n        boxShadow:\n          '12px 12px 16px 0 rgba(0,0,0),-8px -8px 12px 0 rgba(40,41,42)',\n        '&:hover': {\n          boxShadow: '12px 12px 16px 0  #000,-2px -2px 16px 0  #ff5278',\n        },\n        // width: \"100%\",\n      },\n    },\n  },\n})\n\nexport default theme\n","import React from \"react\";\nimport { NavLink as RouterLink } from \"react-router-dom\";\nimport clsx from \"clsx\";\nimport PropTypes from \"prop-types\";\nimport { Button, ListItem, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    item: {\n        display: \"flex\",\n        paddingTop: 0,\n        paddingBottom: 0,\n    },\n    button: {\n        color: theme.palette.text.main,\n        fontWeight: theme.typography.fontWeightMedium,\n        justifyContent: \"flex-start\",\n        letterSpacing: 0,\n        padding: \"10px 8px\",\n        textTransform: \"none\",\n        width: \"100%\",\n    },\n    icon: {\n        marginRight: theme.spacing(1),\n    },\n    title: {\n        marginRight: \"auto\",\n    },\n    active: {\n        color: theme.palette.text.secondary,\n        \"& $title\": {\n            fontWeight: theme.typography.fontWeightBold,\n        },\n        \"& $icon\": {\n            color: theme.palette.text.secondary,\n        },\n    },\n}));\n\nconst NavItem = ({ className, href, icon: Icon, title, ...rest }) => {\n    const classes = useStyles();\n\n    return (\n        <ListItem\n            className={clsx(classes.item, className)}\n            disableGutters\n            {...rest}\n        >\n            <Button\n                activeClassName={classes.active}\n                className={classes.button}\n                component={RouterLink}\n                to={href}\n            >\n                {Icon && <Icon className={classes.icon} size=\"20\" />}\n                <span className={classes.title}>{title}</span>\n            </Button>\n        </ListItem>\n    );\n};\n\nNavItem.propTypes = {\n    className: PropTypes.string,\n    href: PropTypes.string,\n    icon: PropTypes.elementType,\n    title: PropTypes.string,\n};\n\nexport default NavItem;\n","import PropTypes from 'prop-types'\nimport GitHubIcon from '@material-ui/icons/GitHub'\nimport FormatShapesIcon from '@material-ui/icons/FormatShapes'\nimport {\n  Box,\n  Drawer,\n  Fab,\n  List,\n  Typography,\n  makeStyles,\n  Card,\n  CardContent,\n} from '@material-ui/core'\nimport { BarChart as BarChartIcon, Map as MapIcon } from 'react-feather'\nimport NavItem from './NavItem'\n\nconst items = [\n  {\n    href: '/',\n    icon: MapIcon,\n    title: 'CityScopeJS',\n  },\n  {\n    href: '/editor',\n    icon: BarChartIcon,\n    title: 'Grid Editor',\n  },\n  {\n    href: '/projection',\n    icon: FormatShapesIcon,\n    title: 'Projection Mapping',\n  },\n]\n\nconst useStyles = makeStyles(() => ({\n  mobileDrawer: {\n    width: '30vw',\n    top: 48,\n    height: 'calc(100% - 48px)',\n    boxShadow: '22px 22px 22px 0 rgba(0,0,0)',\n  },\n}))\n\nconst NavBar = ({ openNavDrawer, onMobileNavOpen }) => {\n  const classes = useStyles()\n\n  const content = (\n    <Box height=\"100%\" display=\"flex\" flexDirection=\"column\" p={3}>\n      <List>\n        {items.map((item) => (\n          <NavItem\n            style={{ padding: '2vh' }}\n            href={item.href}\n            key={item.title}\n            title={item.title}\n            icon={item.icon}\n            onClick={onMobileNavOpen}\n          />\n        ))}\n      </List>\n\n      <Box flexGrow={1} />\n      <Card elevation={5} p={2}>\n        <CardContent position={'bottom'}>\n          <Fab\n            href=\"http://github.com/CityScope/CS_cityscopeJS/\"\n            color=\"default\"\n            size=\"small\"\n          >\n            <GitHubIcon />\n          </Fab>\n          <Box p={2} />\n          <Typography align=\"left\" variant=\"h5\">\n            MIT CityScope\n          </Typography>\n          <Typography align=\"left\" variant=\"caption\">\n            {new Date().getFullYear()}\n          </Typography>\n        </CardContent>\n      </Card>\n    </Box>\n  )\n\n  return (\n    <>\n      <Drawer\n        anchor=\"left\"\n        classes={{ paper: classes.mobileDrawer }}\n        open={openNavDrawer}\n        elevation={10}\n        variant=\"persistent\"\n      >\n        {content}\n      </Drawer>\n    </>\n  )\n}\n\nNavBar.propTypes = {\n  onMobileNavOpen: PropTypes.func,\n  openNavDrawer: PropTypes.bool,\n}\n\nNavBar.defaultProps = {\n  onMobileClose: () => {},\n  openNavDrawer: false,\n}\n\nexport default NavBar\n","import React from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport clsx from \"clsx\";\nimport PropTypes from \"prop-types\";\n\nimport {\n    AppBar,\n    IconButton,\n    Toolbar,\n    Typography,\n    makeStyles,\n} from \"@material-ui/core\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\n\nconst useStyles = makeStyles(() => ({\n    root: {},\n}));\n\nconst TopBar = ({ className, onMobileNavOpen, ...rest }) => {\n    const classes = useStyles();\n\n    return (\n        <AppBar\n            className={clsx(classes.root, className)}\n            elevation={5}\n            {...rest}\n        >\n            <Toolbar variant=\"dense\">\n                <IconButton color=\"inherit\" onClick={onMobileNavOpen}>\n                    <MenuIcon />\n                </IconButton>\n                <RouterLink to=\"/\">\n                    <Typography\n                        className={classes.name}\n                        color=\"textPrimary\"\n                        variant=\"h5\"\n                    >\n                        MIT CityScope\n                    </Typography>\n                </RouterLink>\n            </Toolbar>\n        </AppBar>\n    );\n};\n\nTopBar.propTypes = {\n    className: PropTypes.string,\n    onMobileNavOpen: PropTypes.func,\n};\n\nexport default TopBar;\n","import React, { useState } from 'react'\nimport { Outlet } from 'react-router-dom'\nimport { makeStyles } from '@material-ui/core'\nimport NavBar from './NavBar'\nimport TopBar from './TopBar'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background,\n    display: 'flex',\n    height: '100%',\n    overflow: 'hidden',\n    width: '100%',\n  },\n\n  content: {\n    paddingTop: 48,\n    flex: '1 1 auto',\n    height: '100vh',\n    overflow: 'auto',\n  },\n}))\n\nconst MainLayout = () => {\n  const classes = useStyles()\n  const [navMenuState, setNavMenuState] = useState(true)\n\n  return (\n    <div className={classes.root}>\n      <NavBar\n        openNavDrawer={!navMenuState}\n        onMobileNavOpen={() => setNavMenuState(!navMenuState)}\n      />\n      <TopBar onMobileNavOpen={() => setNavMenuState(!navMenuState)} />\n      <div className={classes.content}>\n        <Outlet />\n      </div>\n    </div>\n  )\n}\n\nexport default MainLayout\n","import React, { forwardRef } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport PropTypes from \"prop-types\";\n\nconst Page = forwardRef(({ children, title = \"\", ...rest }, ref) => {\n    return (\n        <div ref={ref} {...rest}>\n            <Helmet>\n                <title>\n                    CityScopeJS {\">\"} {title}\n                </title>\n            </Helmet>\n            {children}\n        </div>\n    );\n});\n\nPage.propTypes = {\n    children: PropTypes.node.isRequired,\n    title: PropTypes.string,\n};\n\nexport default Page;\n","import React from \"react\";\nimport { Box, Container, Typography, makeStyles } from \"@material-ui/core\";\nimport Page from \"../../layouts/Page\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background,\n    height: \"100%\",\n    paddingBottom: theme.spacing(3),\n    paddingTop: theme.spacing(3),\n  },\n  image: {\n    marginTop: 50,\n    display: \"inline-block\",\n    maxWidth: \"100%\",\n    width: 560,\n  },\n}));\n\nconst NotFoundView = () => {\n  const classes = useStyles();\n\n  return (\n    <Page className={classes.root} title=\"404\">\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        height=\"100%\"\n        justifyContent=\"center\"\n      >\n        <Container maxWidth=\"md\">\n          <Typography align=\"center\" color=\"textPrimary\" variant=\"h1\">\n            404\n          </Typography>\n          <Typography align=\"center\" color=\"textPrimary\" variant=\"h5\">\n            The page you are looking for isnt here\n          </Typography>\n        </Container>\n      </Box>\n    </Page>\n  );\n};\n\nexport default NotFoundView;\n","import React from \"react\";\n\n/**\n * cell selection\n * meta div\n * @param {*} props\n */\n\nexport default function SelectionTarget(props) {\n    if (!props.mousePos) return null;\n    const mousePos = props.mousePos;\n    const selectedType = props.selectedType;\n    const divSize = props.divSize;\n\n    const colorTrans =\n        \"rgba(\" +\n        selectedType.color[0] +\n        \",\" +\n        selectedType.color[1] +\n        \",\" +\n        selectedType.color[2] +\n        \",0.6)\";\n    let mouseX = mousePos.clientX - divSize / 2;\n    let mouseY = mousePos.clientY - divSize / 2;\n    return (\n        <div\n            style={{\n                border: \"2px solid\",\n                backgroundColor: props.mouseDown ? colorTrans : \"rgba(0,0,0,0)\",\n                borderColor: selectedType.color,\n                color: selectedType.color,\n                borderRadius: \"15%\",\n                position: \"fixed\",\n                zIndex: 1,\n                pointerEvents: \"none\",\n                width: divSize,\n                height: divSize,\n                left: mouseX,\n                top: mouseY,\n            }}\n        >\n            <div\n                style={{\n                    position: \"relative\",\n                    left: divSize + 10,\n                    fontSize: \"0.5em\",\n                }}\n            >\n                {selectedType.name}\n            </div>\n        </div>\n    );\n}\n","/**\n * CSjs ACTIONS\n */\nexport const GET_CITYIO_DATA = 'GET_CITYIO_DATA'\nexport function getCityioData(data) {\n  return { type: GET_CITYIO_DATA, data }\n}\n\nexport const LISTEN_TO_MAP_EVENTS = 'LISTEN_TO_MAP_EVENTS'\nexport function listenToMapEvents(data) {\n  return { type: LISTEN_TO_MAP_EVENTS, data }\n}\n\nexport const LISTEN_TO_ABM_SLIDERS = 'LISTEN_TO_ABM_SLIDERS'\nexport function listenToSlidersEvents(data) {\n  return { type: LISTEN_TO_ABM_SLIDERS, data }\n}\n\nexport const LISTEN_TO_ABM_MODE = 'LISTEN_TO_ABM_MODE'\nexport function listenToABMmode(data) {\n  return { type: LISTEN_TO_ABM_MODE, data }\n}\n\nexport const LISTEN_TO_ACCESS_TOGGLE = 'LISTEN_TO_ACCESS_TOGGLE'\nexport function listenToAccessToggle(data) {\n  return { type: LISTEN_TO_ACCESS_TOGGLE, data }\n}\n\nexport const MENU_INTERACTION = 'MENU_INTERACTION'\nexport function listenToMenuUI(data) {\n  return { type: MENU_INTERACTION, data }\n}\n\nexport const LISTEN_TO_EDIT_MENU = 'LISTEN_TO_EDIT_MENU'\nexport function listenToEditMenu(data) {\n  return { type: LISTEN_TO_EDIT_MENU, data }\n}\n\nexport const SET_READY_STATE = 'SET_READY_STATE'\nexport function setReadyState(data) {\n  return { type: SET_READY_STATE, data }\n}\n\nexport const SET_LOADING_STATE = 'SET_LOADING_STATE'\nexport function setLoadingState(data) {\n  return { type: SET_LOADING_STATE, data }\n}\n\nexport const SET_SCENARIO_NAMES = 'SET_SCENARIO_NAMES'\nexport function setScenarioNames(data) {\n  return { type: SET_SCENARIO_NAMES, data }\n}\n\nexport const ADD_LOADING_MODULES = 'ADD_LOADING_MODULES'\nexport function addLoadingModules(data) {\n  return { type: ADD_LOADING_MODULES, data }\n}\n\nexport const REMOVE_LOADING_MODULES = 'REMOVE_LOADING_MODULES'\nexport function removeLoadingModules(data) {\n  return { type: REMOVE_LOADING_MODULES, data }\n}\n\n/**\n * PROJECTION MAPPING Actions\n */\n\nexport const SET_UI_WEBSOCKET_DATA = 'SET_UI_WEBSOCKET_DATA'\nexport function setUIWebsocketData(data) {\n  return { type: SET_UI_WEBSOCKET_DATA, data }\n}\n\nexport const SET_UI_WEBSOCKET_READY = 'SET_UI_WEBSOCKET_READY'\nexport function setUIWebsocketReady(data) {\n  return { type: SET_UI_WEBSOCKET_READY, data }\n}\n\n/**\n * Editor Actions\n */\n\nexport const LISTEN_TO_GRID_CREATOR = 'LISTEN_TO_GRID_CREATOR'\nexport function listenToGridCreator(data) {\n  return { type: LISTEN_TO_GRID_CREATOR, data }\n}\n\nexport const LISTEN_TO_ROW_EDIT = 'LISTEN_TO_ROW_EDIT'\nexport function listenToRowEdits(data) {\n  return { type: LISTEN_TO_ROW_EDIT, data }\n}\n\nexport const LISTEN_TO_TYPES_LIST = 'LISTEN_TO_TYPES_LIST'\nexport function listeonToTypesList(data) {\n  return { type: LISTEN_TO_TYPES_LIST, data }\n}\n\nexport const LISTEN_TO_BASE_MAP_CENTER = 'LISTEN_TO_BASE_MAP_CENTER'\nexport function listenToBaseMapCenter(data) {\n  return { type: LISTEN_TO_BASE_MAP_CENTER, data }\n}\n","import React, { Component } from \"react\";\nimport EditorBrush from \"./EditorBrush\";\nimport { connect } from \"react-redux\";\nimport { StaticMap } from \"react-map-gl\";\nimport DeckGL from \"@deck.gl/react\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport { GeoJsonLayer } from \"deck.gl\";\nimport settings from \"../../../settings/GridEditorSettings.json\";\nimport { listenToBaseMapCenter } from \"../../../redux/actions\";\n\nexport const _hexToRgb = (hex) => {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result\n        ? [\n              parseInt(result[1], 16),\n              parseInt(result[2], 16),\n              parseInt(result[3], 16),\n          ]\n        : null;\n};\n\nclass BaseMap extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedType: null,\n            draggingWhileEditing: false,\n            selectedCellsState: null,\n            pickingRadius: 40,\n            viewState: settings.map.initialViewState,\n        };\n\n        this.dirLightSettings = {\n            timestamp: Date.UTC(2019, 7, 1, 12),\n            color: [255, 255, 255],\n            intensity: 1.0,\n            _shadow: true,\n        };\n    }\n\n    componentDidMount() {\n        // fix deck view rotate\n        this._rightClickViewRotate();\n\n        // zoom map on CS table location\n        this._setViewStateToTableHeader();\n    }\n\n    _toggleOrthoView = (viewState) => {\n        viewState.orthographic = this.props.menu.includes(\"RESET_VIEW\")\n            ? true\n            : false;\n    };\n\n    _onViewStateChange = ({ viewState }) => {\n        this.setState({ viewState });\n    };\n\n    componentDidUpdate = (prevProps) => {\n        if (this.props.mapCenter !== prevProps.mapCenter)\n            this.setState({\n                viewState: {\n                    ...this.state.viewState,\n                    latitude: this.props.mapCenter.latCenter,\n                    longitude: this.props.mapCenter.lonCenter,\n                    pitch: 0,\n                    bearing: 0,\n                    orthographic: false,\n                },\n            });\n    };\n\n    /**\n     * resets the camera viewport\n     * to cityIO header data\n     * https://github.com/uber/deck.gl/blob/master/test/apps/viewport-transitions-flyTo/src/app.js\n     */\n    _setViewStateToTableHeader() {\n        this.setState({\n            viewState: {\n                ...this.state.viewState,\n                latitude: settings.GEOGRID.properties.header.latitude,\n                longitude: settings.GEOGRID.properties.header.longitude,\n                zoom: 15,\n                pitch: 0,\n                bearing: 0,\n                orthographic: true,\n            },\n        });\n    }\n\n    /**\n     * Description. fix deck issue\n     * with rotate right botton\n     */\n    _rightClickViewRotate() {\n        document\n            .getElementById(\"deckgl-wrapper\")\n            .addEventListener(\"contextmenu\", (evt) => evt.preventDefault());\n    }\n\n    /**\n     * Description. uses deck api to\n     * collect objects in a region\n     * @argument{object} e  picking event\n     */\n    _mulipleObjPicked = (e) => {\n        const dim = this.state.pickingRadius;\n        const x = e.x - dim / 2;\n        const y = e.y - dim / 2;\n        let mulipleObj = this.deckGL.pickObjects({\n            x: x,\n            y: y,\n            width: dim,\n            height: dim,\n        });\n        return mulipleObj;\n    };\n\n    /**\n     * Description. allow only to pick cells that are\n     *  not of CityScope TUI & that are interactable\n     * so to not overlap TUI activity\n     */\n    _handleGridcellEditing = (e) => {\n        if (!this.props.selectedType) return;\n        const { height, name, color, interactive } = this.props.selectedType;\n        const multiSelectedObj = this._mulipleObjPicked(e);\n\n        multiSelectedObj.forEach((selected) => {\n            let thisCellProps = selected.object.properties;\n            thisCellProps.color = _hexToRgb(color);\n            thisCellProps.height = parseInt(height);\n            thisCellProps.name = name;\n            if (interactive !== \"No\") {\n                thisCellProps.interactive = interactive;\n            } else {\n                delete thisCellProps.interactive;\n            }\n        });\n        this.setState({\n            selectedCellsState: multiSelectedObj,\n        });\n    };\n\n    /**\n     * Description.\n     * draw target area around mouse\n     */\n    _renderSelectionTarget = () => {\n        return (\n            this.props.selectedType && (\n                <EditorBrush\n                    mousePos={this.state.mousePos}\n                    selectedType={this.props.selectedType}\n                    divSize={this.state.pickingRadius}\n                    mouseDown={this.state.mouseDown}\n                />\n            )\n        );\n    };\n\n    _handleKeyUp = () => {\n        this.setState({ keyDownState: null });\n    };\n\n    _handleKeyDown = (e) => {\n        // avoid common clicks\n        this.setState({ keyDownState: e.nativeEvent.key });\n    };\n\n    /**\n     * renders deck gl layers\n     */\n    _renderLayers() {\n        let layers = [];\n        layers.push(\n            new GeoJsonLayer({\n                id: \"GRID\",\n                opacity: 0.5,\n                stroked: false,\n                filled: true,\n                wireframe: true,\n                data: this.props.createdGrid,\n                visible: true,\n                pickable: true,\n                extruded: true,\n                lineWidthScale: 1,\n                lineWidthMinPixels: 1,\n                getElevation: (d) => d.properties.height,\n                getFillColor: (d) => d.properties.color,\n\n                onClick: (event, cellInfo) => {\n                    if (\n                        !cellInfo.rightButton &&\n                        this.state.keyDownState !== \"Shift\"\n                    )\n                        this._handleGridcellEditing(event);\n                },\n\n                onDrag: (event, cellInfo) => {\n                    if (\n                        !cellInfo.rightButton &&\n                        this.state.keyDownState !== \"Shift\"\n                    )\n                        this._handleGridcellEditing(event);\n                },\n                onDragStart: (event, cellInfo) => {\n                    if (\n                        !cellInfo.rightButton &&\n                        this.state.keyDownState !== \"Shift\"\n                    ) {\n                        this.setState({ draggingWhileEditing: true });\n                    }\n                },\n                onDragEnd: () => {\n                    this.setState({ draggingWhileEditing: false });\n                },\n                updateTriggers: {\n                    getFillColor: this.state.selectedCellsState,\n                    getElevation: this.state.selectedCellsState,\n                },\n                transitions: {\n                    getFillColor: 500,\n                    getElevation: 500,\n                },\n            })\n        );\n\n        return layers;\n    }\n\n    render() {\n        return (\n            <div\n                className=\"baseMap\"\n                onKeyDown={this._handleKeyDown}\n                onKeyUp={this._handleKeyUp}\n                onMouseMove={(e) =>\n                    this.setState({\n                        mousePos: e.nativeEvent,\n                    })\n                }\n                onMouseUp={() =>\n                    this.setState({\n                        mouseDown: false,\n                    })\n                }\n                onMouseDown={() =>\n                    this.setState({\n                        mouseDown: true,\n                    })\n                }\n            >\n                {this._renderSelectionTarget()}\n\n                <DeckGL\n                    // sets the cursor on paint\n                    // getCursor={() => \"none\"}\n                    ref={(ref) => {\n                        // save a reference to the Deck instance\n                        this.deckGL = ref && ref.deck;\n                    }}\n                    viewState={this.state.viewState}\n                    onViewStateChange={this._onViewStateChange}\n                    layers={this._renderLayers()}\n                    controller={{\n                        touchZoom: true,\n                        touchRotate: true,\n                        dragPan: !this.state.draggingWhileEditing,\n                        dragRotate: !this.state.draggingWhileEditing,\n                        keyboard: false,\n                    }}\n                >\n                    <StaticMap\n                        dragRotate={true}\n                        reuseMaps={true}\n                        mapboxApiAccessToken={\n                            process.env.REACT_APP_MAPBOX_TOKEN\n                        }\n                        mapStyle={settings.map.mapStyle.sat}\n                        preventStyleDiffing={true}\n                    />\n                </DeckGL>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = {\n    listenToBaseMapCenter: listenToBaseMapCenter,\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        selectedType: state.ROW_EDIT,\n        mapCenter: state.BASE_MAP_CENTER,\n        createdGrid: state.GRID_CREATED,\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BaseMap);\n","import MaterialTable from '@material-table/core'\nimport React, { useState, useEffect } from 'react'\nimport { Grid, Typography } from '@material-ui/core'\n\nimport {\n  listenToRowEdits,\n  listeonToTypesList,\n  listenToGridCreator,\n} from '../../../../redux/actions'\nimport { useDispatch } from 'react-redux'\nimport settings from '../../../../settings/GridEditorSettings.json'\n\nexport default function TypesEditor() {\n  const createtypesArray = (LanduseTypesList) => {\n    let typesArray = []\n    Object.keys(LanduseTypesList).forEach((type) => {\n      typesArray.push({\n        name: type,\n        description: 'description for: ' + type,\n        color: LanduseTypesList[type].color,\n        height: LanduseTypesList[type].height\n          ? LanduseTypesList[type].height\n          : 0,\n\n        LBCS: LanduseTypesList[type].LBCS\n          ? JSON.stringify(LanduseTypesList[type].LBCS)\n          : null,\n        NAICS: LanduseTypesList[type].NAICS\n          ? JSON.stringify(LanduseTypesList[type].NAICS)\n          : null,\n        interactive: LanduseTypesList[type].interactive,\n      })\n    })\n    return typesArray\n  }\n\n  const [state, setState] = React.useState({\n    columns: [\n      {\n        title: 'Type',\n        field: 'name',\n      },\n      {\n        title: 'Description',\n        field: 'description',\n      },\n\n      {\n        title: 'Height',\n        field: 'height',\n        type: 'numeric',\n      },\n      {\n        title: 'Interactive',\n        field: 'interactive',\n        lookup: { No: 'No', Web: 'Web', TUI: 'TUI' },\n      },\n      {\n        title: 'Color',\n        field: 'color',\n        type: 'string',\n      },\n      {\n        title: 'LBCS',\n        field: 'LBCS',\n        type: 'string',\n      },\n      {\n        title: 'NAICS',\n        field: 'NAICS',\n        type: 'string',\n      },\n    ],\n    data: createtypesArray(settings.GEOGRID.properties.types),\n  })\n\n  const dispatch = useDispatch()\n  const [selectedRow, setSelectedRow] = useState(null)\n  const [rowColor, setRowColor] = useState(null)\n\n  // redux the type list on every change\n  useEffect(() => {\n    dispatch(listeonToTypesList(state.data))\n  })\n\n  return (\n    <Grid container>\n      <Grid item xs={12} s={12} m={12} l={12} xl={12}>\n        <MaterialTable\n          title={<Typography variant=\"h2\">Types Editor</Typography>}\n          columns={state.columns}\n          data={state.data}\n          options={{\n            paging: false,\n            search: true,\n            selection: false,\n            rowStyle: (rowData) => ({\n              fontFamily: 'Roboto Mono',\n              fontSize: 12,\n              backgroundColor:\n                selectedRow === rowData.tableData.id ? rowColor : null,\n            }),\n          }}\n          onRowClick={(evt, row) => {\n            setSelectedRow(row.tableData.id)\n            setRowColor(row.color)\n            dispatch(listenToRowEdits(row))\n          }}\n          editable={{\n            onRowAdd: (newData) =>\n              new Promise((resolve) => {\n                setTimeout(() => {\n                  resolve()\n                  setState((prevState) => {\n                    const data = [...prevState.data]\n                    data.push(newData)\n                    return { ...prevState, data }\n                  })\n                }, 200)\n              }),\n            onRowUpdate: (newData, oldData) =>\n              new Promise((resolve) => {\n                setTimeout(() => {\n                  resolve()\n                  if (oldData) {\n                    setState((prevState) => {\n                      const data = [...prevState.data]\n                      data[data.indexOf(oldData)] = newData\n\n                      return { ...prevState, data }\n                    })\n                  }\n\n                  // dispath change to redux\n                  dispatch(listenToRowEdits(newData))\n                }, 200)\n              }),\n            onRowDelete: (oldData) =>\n              new Promise((resolve) => {\n                console.log(oldData)\n\n                setTimeout(() => {\n                  resolve()\n                  setState((prevState) => {\n                    const data = [...prevState.data]\n                    data.splice(data.indexOf(oldData), 1)\n                    return { ...prevState, data }\n                  })\n\n                  dispatch(listenToGridCreator(null))\n                }, 200)\n              }),\n          }}\n        />\n      </Grid>\n    </Grid>\n  )\n}\n","import proj4 from \"proj4\";\nimport { _hexToRgb } from \"../../../EditorMap/EditorMap\";\n\nfunction deg_to_rad(deg) {\n    return (deg * Math.PI) / 180;\n}\nfunction rad_to_deg(rad) {\n    return (rad * 180) / Math.PI;\n}\n\nconst randomProperty = (obj) => {\n    var keys = Object.keys(obj);\n    return obj[keys[(keys.length * Math.random()) << 0]];\n};\n\nexport const gridCreator = (gridProps, typesList) => {\n    let top_left_lon = parseFloat(gridProps.longitude);\n    let top_left_lat = parseFloat(gridProps.latitude);\n    let rotation = parseFloat(gridProps.rotation);\n    let userPrj = gridProps.projection;\n    let cell_size = parseFloat(gridProps.cellSize);\n    let nrows = parseFloat(gridProps.nrows);\n    let ncols = parseFloat(gridProps.ncols);\n\n    const webMercator = proj4.defs(\"EPSG:4326\");\n    let EARTH_RADIUS_M = 6.371e6;\n    let top_left_lon_lat = { lon: top_left_lon, lat: top_left_lat };\n    let bearing = (90 - rotation + 360) % 360;\n    let Ad = (cell_size * ncols) / EARTH_RADIUS_M;\n    let la1 = deg_to_rad(top_left_lon_lat.lat);\n    let lo1 = deg_to_rad(top_left_lon_lat.lon);\n    let bearing_rad = deg_to_rad(bearing);\n    let la2 = Math.asin(\n        Math.sin(la1) * Math.cos(Ad) +\n            Math.cos(la1) * Math.sin(Ad) * Math.cos(bearing_rad)\n    );\n    let lo2 =\n        lo1 +\n        Math.atan2(\n            Math.sin(bearing_rad) * Math.sin(Ad) * Math.cos(la1),\n            Math.cos(Ad) - Math.sin(la1) * Math.sin(la2)\n        );\n    let top_right_lon_lat = { lon: rad_to_deg(lo2), lat: rad_to_deg(la2) };\n    let top_left_xy = proj4(webMercator, userPrj, [\n        top_left_lon_lat.lon,\n        top_left_lon_lat.lat,\n    ]);\n\n    let top_right_xy = proj4(webMercator, userPrj, [\n        top_right_lon_lat.lon,\n        top_right_lon_lat.lat,\n    ]);\n\n    let dydx =\n        (top_right_xy[1] - top_left_xy[1]) / (top_right_xy[0] - top_left_xy[0]);\n    let theta = Math.atan(dydx);\n    let cosTheta = Math.cos(theta);\n    let sinTheta = Math.sin(theta);\n    // create rotate matrix\n    let x_unRot = [];\n    let y_unRot = [];\n    for (let i = 0; i < nrows; i++) {\n        for (let j = 0; j < ncols; j++) {\n            x_unRot.push(j * cell_size);\n            y_unRot.push(-i * cell_size);\n        }\n    }\n\n    let x_rot = [];\n    let y_rot = [];\n    for (let i = 0; i < x_unRot.length; i++) {\n        x_rot.push(x_unRot[i] * cosTheta - y_unRot[i] * sinTheta);\n        y_rot.push(x_unRot[i] * sinTheta + y_unRot[i] * cosTheta);\n    }\n\n    let x_rot_trans = [];\n    let y_rot_trans = [];\n    for (let i = 0; i < x_rot.length; i++) {\n        x_rot_trans.push(top_left_xy[0] + x_rot[i]);\n        y_rot_trans.push(top_left_xy[1] + y_rot[i]);\n    }\n\n    var dxdCol = x_rot_trans[1] - x_rot_trans[0];\n    var dydCol = y_rot_trans[1] - y_rot_trans[0];\n    var dxdRow = x_rot_trans[ncols] - x_rot_trans[0];\n    var dydRow = y_rot_trans[ncols] - y_rot_trans[0];\n\n    let gridPnts = [];\n    let geojsonFeatureCollection = {\n        type: \"FeatureCollection\",\n        // polygons go here\n        features: [],\n    };\n\n    // get a list of types that is updated based on\n    // the current redux state of the types list table\n    let types = typesList;\n\n    for (let i = 0; i < x_rot_trans.length; i++) {\n        let rndType = randomProperty(types);\n\n        let geojsonPolygon = {\n            type: \"Feature\",\n            geometry: {\n                type: \"Polygon\",\n                coordinates: null,\n            },\n            properties: {\n                color: _hexToRgb(rndType.color),\n                height: rndType.height,\n                name: rndType.name,\n                interactive: rndType.interactive,\n                id: i,\n            },\n        };\n\n        var polygon_xy = [\n            [x_rot_trans[i], y_rot_trans[i]],\n            [x_rot_trans[i] + dxdRow, y_rot_trans[i] + dydRow],\n            [\n                x_rot_trans[i] + dxdRow + dxdCol,\n                y_rot_trans[i] + dydRow + dydCol,\n            ],\n            [x_rot_trans[i] + dxdCol, y_rot_trans[i] + dydCol],\n            [x_rot_trans[i], y_rot_trans[i]],\n        ];\n\n        var polygon_ll = [];\n        for (var v = 0; v < 5; v++) {\n            let ll = proj4(userPrj, webMercator, polygon_xy[v]);\n\n            polygon_ll.push(ll);\n        }\n\n        geojsonPolygon.geometry.coordinates = [polygon_ll];\n        gridPnts.push(geojsonPolygon);\n    }\n    geojsonFeatureCollection.features = gridPnts;\n    return geojsonFeatureCollection;\n};\n","import React from \"react\";\nimport AppsIcon from \"@material-ui/icons/Apps\";\nimport Button from \"@material-ui/core/Button\";\nimport { gridCreator } from \"./gridCreator\";\nimport { listenToGridCreator } from \"../../../../../redux/actions\";\nimport { useDispatch } from \"react-redux\";\nimport { useSelector } from \"react-redux\";\n\nexport default function GridMaker(props) {\n    const dispatch = useDispatch();\n    const reduxState = useSelector((state) => state);\n\n    const handleGridCreation = () => {\n        let grid = gridCreator(props.gridProps, reduxState.TYPES_LIST);\n        dispatch(listenToGridCreator(grid));\n    };\n\n    return (\n        <Button\n            onClick={() => {\n                handleGridCreation();\n            }}\n            variant=\"outlined\"\n            color=\"default\"\n            startIcon={<AppsIcon />}\n        >\n            Create Grid\n        </Button>\n    );\n}\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\nimport CloudDownloadIcon from \"@material-ui/icons/CloudDownload\";\nimport axios from \"axios\";\nimport settings from \"../../../../../settings/GridEditorSettings.json\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { useSelector } from \"react-redux\";\nimport Link from \"@material-ui/core/Link\";\n\nconst reqResonseUI = (response, tableName) => {\n    let cityscopeJSendpoint =\n        \"https://cityscope.media.mit.edu/CS_cityscopeJS/?cityscope=\" +\n        tableName;\n    // create the feedback text\n    let resText = (\n        <Typography color=\"textPrimary\" variant=\"caption\">\n            CityIO is {response.data.status}. Grid deployed to{\" \"}\n            <Link color=\"textSecondary\" href={cityscopeJSendpoint}>\n                {cityscopeJSendpoint}\n            </Link>\n        </Typography>\n    );\n\n    return resText;\n};\n\n/**\n *\n * @param {typesList} typesList List of types form table editor\n *\n */\nconst makeGEOGRIDobject = (struct, typesList, geoJsonFeatures, gridProps) => {\n    let GEOGRID_object = struct;\n\n    // take types list and prepare to csJS format\n    let newTypesList = {};\n\n    typesList.forEach((oldType) => {\n        newTypesList[oldType.name] = oldType;\n        //material-table creates strings for these items\n        // so in first \"Commit to cityIO\", these must be turned into\n        // Json objects. On Second commit, these are already objects,\n        // hence the two conditions below\n\n        newTypesList[oldType.name].LBCS =\n            typeof oldType.LBCS == \"string\"\n                ? JSON.parse(oldType.LBCS)\n                : oldType.LBCS;\n        newTypesList[oldType.name].NAICS =\n            typeof oldType.NAICS == \"string\"\n                ? JSON.parse(oldType.NAICS)\n                : oldType.NAICS;\n    });\n\n    GEOGRID_object.properties.types = newTypesList;\n\n    // inject table props to grid\n    GEOGRID_object.properties.header = gridProps;\n    GEOGRID_object.properties.header.longitude = parseFloat(\n        GEOGRID_object.properties.header.longitude\n    );\n    GEOGRID_object.properties.header.latitude = parseFloat(\n        GEOGRID_object.properties.header.latitude\n    );\n    GEOGRID_object.properties.header.rotation = parseFloat(\n        GEOGRID_object.properties.header.rotation\n    );\n    GEOGRID_object.properties.header.nrows = parseFloat(\n        GEOGRID_object.properties.header.nrows\n    );\n    GEOGRID_object.properties.header.ncols = parseFloat(\n        GEOGRID_object.properties.header.ncols\n    );\n    GEOGRID_object.properties.header.cellSize = parseFloat(\n        GEOGRID_object.properties.header.cellSize\n    );\n\n    // lastly get the grid features\n    GEOGRID_object.features = geoJsonFeatures;\n    return GEOGRID_object;\n};\n\n/**\n *\n * @param {typesList} typesList List of types form table editor\n *\n */\nconst makeGEOGRIDDATAobject = (geoJsonFeatures) => {\n    let GEOGRIDDATA_object = [];\n    geoJsonFeatures.forEach((element) => {\n        GEOGRIDDATA_object.push(element.properties);\n    });\n    return GEOGRIDDATA_object;\n};\n\nexport default function CommitGrid(props) {\n    const [reqResonse, setReqResonse] = React.useState(null);\n\n    const reduxState = useSelector((state) => state);\n    const hasGrid = reduxState.GRID_CREATED;\n\n    const downloadObjectAsJson = () => {\n        let GEOGRIDstruct = settings.GEOGRID;\n\n        let typesList = reduxState.TYPES_LIST;\n        let geoJsonFeatures = reduxState.GRID_CREATED.features;\n        let gridProps = props.gridProps;\n        let GEOGRID_object = makeGEOGRIDobject(\n            GEOGRIDstruct,\n            typesList,\n            geoJsonFeatures,\n            gridProps\n        );\n        var dataStr =\n            \"data:text/json;charset=utf-8,\" +\n            encodeURIComponent(JSON.stringify(GEOGRID_object));\n        var downloadAnchorNode = document.createElement(\"a\");\n        downloadAnchorNode.setAttribute(\"href\", dataStr);\n        downloadAnchorNode.setAttribute(\"download\", \"grid.json\");\n        document.body.appendChild(downloadAnchorNode); // required for firefox\n        downloadAnchorNode.click();\n        downloadAnchorNode.remove();\n    };\n\n    const postGridToCityIO = () => {\n        let GEOGRIDstruct = settings.GEOGRID;\n        let typesList = reduxState.TYPES_LIST;\n        let geoJsonFeatures = reduxState.GRID_CREATED.features;\n        let gridProps = props.gridProps;\n        // take grid struct from settings\n        let GEOGRID_object = makeGEOGRIDobject(\n            GEOGRIDstruct,\n            typesList,\n            geoJsonFeatures,\n            gridProps\n        );\n\n        let GEOGRIDDATA_object = makeGEOGRIDDATAobject(geoJsonFeatures);\n\n        let tableName = GEOGRID_object.properties.header.tableName.toLowerCase();\n        let requestsList = {\n            geoGridURL:\n                \"https://cityio.media.mit.edu/api/table/update/\" +\n                tableName +\n                \"/GEOGRID\",\n\n            geoGridDataURL:\n                \"https://cityio.media.mit.edu/api/table/update/\" +\n                tableName +\n                \"/GEOGRIDDATA\",\n        };\n\n        const geoGridOptions = (URL, DATA) => {\n            return {\n                method: \"post\",\n                url: URL,\n                data: DATA,\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Accept: \"application/json\",\n                },\n            };\n        };\n\n        axios(geoGridOptions(requestsList.geoGridURL, GEOGRID_object))\n            .then(function (response) {\n                setReqResonse(reqResonseUI(response, tableName));\n            })\n            // then reset GEOGRIDDATA of that new grid\n\n            .then(function () {\n                axios(geoGridOptions(requestsList.geoGridDataURL, {}));\n                console.log(\"removed GEOGRIDDATA\");\n            })\n            .then(function () {\n                axios(\n                    geoGridOptions(\n                        requestsList.geoGridDataURL,\n                        GEOGRIDDATA_object\n                    )\n                );\n                console.log(\"mirrored GEOGRID to GEOGRIDDATA\");\n            })\n            .catch((error) => {\n                console.log(\"ERROR:\", error);\n            });\n    };\n\n    return (\n        <>\n            {hasGrid && (\n                <>\n                    <Button\n                        onClick={() => {\n                            postGridToCityIO();\n                        }}\n                        variant=\"outlined\"\n                        color=\"default\"\n                        startIcon={<CloudUploadIcon />}\n                    >\n                        Commit Grid to cityIO\n                    </Button>\n\n                    <Button\n                        onClick={() => {\n                            // ! download as json\n                            downloadObjectAsJson();\n                        }}\n                        variant=\"outlined\"\n                        color=\"default\"\n                        startIcon={<CloudDownloadIcon />}\n                    >\n                        Download JSON\n                    </Button>\n\n                    <div style={{ width: \"100%\" }}> {reqResonse}</div>\n                </>\n            )}\n        </>\n    );\n}\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport CenterFocusStrongIcon from \"@material-ui/icons/CenterFocusStrong\";\nimport { useDispatch } from \"react-redux\";\n\nimport { listenToBaseMapCenter } from \"../../../../../redux/actions\";\n\nexport default function CenterMapButton(props) {\n    const dispatch = useDispatch();\n\n    return (\n        <Button\n            onClick={() => {\n                dispatch(\n                    listenToBaseMapCenter({\n                        latCenter: parseFloat(props.mapCenter[0]),\n                        lonCenter: parseFloat(props.mapCenter[1]),\n                    })\n                );\n            }}\n            variant=\"outlined\"\n            color=\"default\"\n            startIcon={<CenterFocusStrongIcon />}\n            style={{ fontSize: \"12px\" }}\n        >\n            Center Map\n        </Button>\n    );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport GridMaker from \"./GridMaker\";\nimport CommitGrid from \"./CommitGrid\";\nimport CenterMapButton from \"./CenterMapButton/CenterMapButton\";\nimport settings from \"../../../../settings/GridEditorSettings.json\";\n\n\nexport default function GridProps() {\n    const useStyles = makeStyles((theme) => ({\n        notchedOutline: {\n            borderWidth: \"1px\",\n            borderColor: theme.palette.text.secondary,\n        },\n        root: {\n            \"& .MuiTextField-root\": {\n                margin: theme.spacing(1),\n                flexWrap: \"wrap\",\n            },\n            \"& > *\": {\n                margin: theme.spacing(1),\n            },\n        },\n    }));\n\n    const [formValues, setformValues] = React.useState({\n        tableName: \"CityScopeJS\",\n        latitude: settings.GEOGRID.properties.header.latitude,\n        longitude: settings.GEOGRID.properties.header.longitude,\n        tz:settings.GEOGRID.properties.header.tz, \n        nrows: settings.GEOGRID.properties.header.nrows,\n        ncols: settings.GEOGRID.properties.header.nrows,\n        rotation: settings.GEOGRID.properties.header.rotation,\n        cellSize: settings.GEOGRID.properties.header.cellSize,\n        projection: settings.GEOGRID.properties.header.projection,\n    });\n\n    const handleChangeForm = (event) => {\n        const { id, value } = event.target;\n        setformValues({ ...formValues, [id]: value });\n    };\n\n    const classes = useStyles();\n\n    //  get all data\n    // https://stackoverflow.com/questions/56641235/react-how-to-get-values-from-material-ui-textfield-components\n    return (\n        <form className={classes.root} noValidate autoComplete=\"off\">\n            <Typography variant=\"h2\">Grid Properties</Typography>\n            <div className={classes.root}>\n                <TextField\n                    InputProps={{\n                        classes: {\n                            notchedOutline: classes.notchedOutline,\n                        },\n                    }}\n                    onChange={(event) => handleChangeForm(event)}\n                    variant=\"outlined\"\n                    className={classes.textField}\n                    id=\"tableName\"\n                    label=\"CityScope Project Name\"\n                    defaultValue={formValues.tableName}\n                />\n            </div>\n            <div className={classes.root}>\n                <TextField\n                    InputProps={{\n                        classes: {\n                            notchedOutline: classes.notchedOutline,\n                        },\n                    }}\n                    onChange={(event) => handleChangeForm(event)}\n                    variant=\"outlined\"\n                    className={classes.textField}\n                    id=\"latitude\"\n                    label=\"Latitude\"\n                    defaultValue={formValues.latitude}\n                    type=\"number\"\n                />\n\n                <TextField\n                    InputProps={{\n                        classes: {\n                            notchedOutline: classes.notchedOutline,\n                        },\n                    }}\n                    onChange={(event) => handleChangeForm(event)}\n                    variant=\"outlined\"\n                    className={classes.textField}\n                    id=\"longitude\"\n                    label=\"Longitude\"\n                    defaultValue={formValues.longitude}\n                    type=\"number\"\n                />\n                <TextField\n                    InputProps={{\n                        classes: {\n                            notchedOutline: classes.notchedOutline,\n                        },\n                    }}\n                    onChange={(event) => handleChangeForm(event)}\n                    variant=\"outlined\"\n                    className={classes.textField}\n                    id=\"tz\"\n                    label=\"Time Zone (GMT)\"\n                    defaultValue={formValues.tz}\n                    type=\"number\"\n                />\n            </div>\n            <div className={classes.root}>\n                <CenterMapButton\n                    mapCenter={[formValues.latitude, formValues.longitude]}\n                />\n            </div>\n            <div className={classes.root}>\n                <TextField\n                    onChange={(event) => handleChangeForm(event)}\n                    variant=\"outlined\"\n                    className={classes.textField}\n                    id=\"nrows\"\n                    label=\"Rows\"\n                    defaultValue={formValues.nrows}\n                    type=\"number\"\n                    InputProps={{\n                        classes: {\n                            notchedOutline: classes.notchedOutline,\n                        },\n                        inputProps: {\n                            max: 100,\n                            min: 0,\n                        },\n                    }}\n                />\n\n                <TextField\n                    onChange={(event) => handleChangeForm(event)}\n                    variant=\"outlined\"\n                    className={classes.textField}\n                    id=\"ncols\"\n                    label=\"Columns\"\n                    defaultValue={formValues.ncols}\n                    type=\"number\"\n                    InputProps={{\n                        classes: {\n                            notchedOutline: classes.notchedOutline,\n                        },\n                        inputProps: {\n                            max: 100,\n                            min: 0,\n                        },\n                    }}\n                />\n\n                <TextField\n                    onChange={(event) => handleChangeForm(event)}\n                    variant=\"outlined\"\n                    className={classes.textField}\n                    id=\"rotation\"\n                    label=\"Rotation (deg)\"\n                    defaultValue={formValues.rotation}\n                    type=\"number\"\n                    InputProps={{\n                        classes: {\n                            notchedOutline: classes.notchedOutline,\n                        },\n                        inputProps: {\n                            max: 360,\n                            min: 0,\n                        },\n                    }}\n                />\n\n                <TextField\n                    onChange={(event) => handleChangeForm(event)}\n                    variant=\"outlined\"\n                    className={classes.textField}\n                    id=\"cellSize\"\n                    label=\"Cell Size (m^2)\"\n                    defaultValue={formValues.cellSize}\n                    type=\"number\"\n                    InputProps={{\n                        classes: {\n                            notchedOutline: classes.notchedOutline,\n                        },\n                        inputProps: {\n                            max: 1000,\n                            min: 0,\n                        },\n                    }}\n                />\n            </div>\n            <div className={classes.root}>\n                <TextField\n                    InputProps={{\n                        classes: {\n                            notchedOutline: classes.notchedOutline,\n                        },\n                    }}\n                    onChange={(event) => handleChangeForm(event)}\n                    variant=\"outlined\"\n                    id=\"projection\"\n                    label=\"Projection\"\n                    defaultValue={formValues.projection}\n                    type=\"string\"\n                    helperText=\"Default projection should work for most CityScope cases. Find specific projections at: https://epsg.io/\"\n                />\n            </div>\n            <div className={classes.root}>\n                <GridMaker gridProps={formValues} />\n                <CommitGrid gridProps={formValues} />\n            </div>\n        </form>\n    );\n}\n","// // export default EditMenuMain;\n\nimport TypesEditor from './TypesEditor'\nimport GridProps from './GridProps'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport Typography from '@material-ui/core/Typography'\n\nexport default function EditorMenu() {\n  return (\n    <List>\n      <ListItem>\n        <Typography variant=\"h1\">CityScope Grid Editor</Typography>\n      </ListItem>\n      <ListItem>\n        <Typography>\n          This tool is for creating CityScope projects with virtual editable\n          girds, types, and props, and deploy them to cityIO.\n        </Typography>\n      </ListItem>\n      <ListItem>\n        <GridProps />\n      </ListItem>\n      <ListItem>\n        <TypesEditor />\n      </ListItem>\n    </List>\n  )\n}\n","import EditorMap from \"./EditorMap/EditorMap\";\nimport EditorMenu from \"./EditorMenu\";\nimport {\n    makeStyles,\n    Grid,\n    Card,\n    CardContent,\n    Container,\n} from \"@material-ui/core\";\nimport Page from \"../../layouts/Page\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: \"auto\",\n        height: \"100%\",\n        paddingBottom: theme.spacing(3),\n        paddingTop: theme.spacing(3),\n    },\n}));\n\nexport default function GridEditor() {\n    const classes = useStyles();\n\n    return (\n        <Page className={classes.root} title=\"Editor\">\n            <Container maxWidth={false}>\n                <>\n                    <Grid container spacing={5}>\n                        <Grid item xs={12} l={6} md={6} xl={4}>\n                            <Card\n                                elevation={15}\n                                style={{\n                                    maxHeight: \"85vh\",\n                                    overflow: \"auto\",\n                                }}\n                            >\n                                <CardContent>\n                                    <EditorMenu />\n                                </CardContent>\n                            </Card>\n                        </Grid>\n                        <Grid item xs={12} l={6} md={6} xl={8}>\n                            <Card\n                                elevation={15}\n                                style={{\n                                    height: \"85vh\",\n                                    width: \"100%\",\n                                    position: \"relative\",\n                                }}\n                            >\n                                <CardContent>\n                                    <EditorMap />\n                                </CardContent>\n                            </Card>\n                        </Grid>\n                    </Grid>\n                </>\n            </Container>\n        </Page>\n    );\n}\n","import axios from \"axios\";\nimport settings from \"../../../settings/settings.json\";\n\nexport const getScenarioIndices = (\n    tableName,\n    setScenarioNames,\n    setLoadingState\n) => {\n    var url = settings.cityIO.baseURL + tableName + \"/meta/hashes\";\n    axios\n        .get(url)\n        .then((res) => {\n            const metaDataKeys = Object.keys(res.data);\n            const scenarioIndices = metaDataKeys\n                .filter((str) => str.includes(\"scenarios\"))\n                .map((str) => parseInt(str.replace(\"scenarios\", \"\")));\n            const promises = [];\n            for (const id of scenarioIndices) {\n                promises.push(getScenarioName(tableName, id));\n            }\n            Promise.all(promises)\n                .then((res) => {\n                    setScenarioNames(\n                        res.map((r) => ({\n                            name: r.data.name,\n                            id: r.data.id,\n                        }))\n                    );\n                    setLoadingState && setLoadingState(false);\n                })\n                .catch((err) =>\n                    console.log(\"error getting scenario names\", err)\n                );\n        })\n        .catch((err) => {\n            console.log(\"Error getting scenarios\", err);\n        });\n};\n\nexport const getScenarioName = (tableName, id) => {\n    const url =\n        settings.cityIO.baseURL + tableName + \"/scenarios\" + id + \"/info\";\n    return axios.get(url);\n};\n","import { useEffect, useState, useRef } from 'react'\nimport axios from 'axios'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n  getCityioData,\n  setReadyState,\n  setLoadingState,\n  setScenarioNames,\n  addLoadingModules,\n  removeLoadingModules,\n} from '../../../redux/actions'\nimport settings from '../../../settings/settings.json'\nimport { getScenarioIndices } from './utils'\n\nconst getAPICall = async (URL) => {\n  try {\n    // ! should add 'retry' here\n    // ! https://stackoverflow.com/questions/56074531/how-to-retry-5xx-requests-using-axios\n    const response = await axios.get(URL)\n    return response.data\n  } catch (err) {\n    console.log(err)\n  }\n}\n\nexport default function CityIO(props) {\n  const { tableName } = props\n\n  // get the current state\n  const { menuState, cityioData } = useSelector((state) => ({\n    menuState: state.MENU,\n    cityioData: state.CITYIO,\n  }))\n\n  // get the current state of the menu as Ref\n  const [isEditing, setIsEditing] = useState()\n  const isEditingRef = useRef(isEditing)\n  isEditingRef.current = isEditing\n\n  const [hashId, setHashId] = useState(null)\n  const [hashes, setHashes] = useState({})\n  const cityioURL = settings.cityIO.baseURL + tableName\n\n  const dispatch = useDispatch()\n\n  /**\n   *  GET hashes to check for new data on every change of the menuState\n   */\n  useEffect(() => {\n    //   checks if we're in edit mode (button is clicked)\n    menuState.includes('EDIT') ? setIsEditing(true) : setIsEditing(false)\n\n    const timer = setTimeout(update, settings.cityIO.interval)\n    console.log('reading cityIO every' + settings.cityIO.interval + 'ms')\n    return () => clearTimeout(timer)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [menuState])\n\n  async function update() {\n    /**\n     * https://upmostly.com/tutorials/settimeout-in-react-components-using-hooks\n     * Using a state property inside of a setTimeout\n     * does not use the current value of that state property!\n     */\n\n    // recursively get hashes\n    const newHashId = await getAPICall(cityioURL + '/meta/id')\n    if (hashId !== newHashId) {\n      setHashId(newHashId)\n    }\n    // get the current state of editing\n    // only keep the setTimeout if we're not in edit mode\n    !isEditingRef.current && setTimeout(update, settings.cityIO.interval)\n  }\n\n  async function getModules() {\n    const newHashes = await getAPICall(cityioURL + '/meta/hashes')\n    const promises = []\n    const loadingModules = []\n    const pickedModules = settings.cityIO.cityIOmodules.map((x) => x.name)\n    // for each of the modules in settings, add api call to promises\n    pickedModules.forEach((module) => {\n      if (hashes[module] !== newHashes[module]) {\n        promises.push(getAPICall(cityioURL + '/' + module))\n        loadingModules.push(module)\n      } else {\n        promises.push(null)\n      }\n    })\n    dispatch(addLoadingModules(loadingModules))\n    const modules = await Promise.all(promises)\n    setHashes(newHashes)\n\n    // update cityio object with modules data\n    const modulesData = pickedModules.reduce((obj, k, i) => {\n      if (modules[i]) {\n        console.log(`updating ${k}`)\n        return { ...obj, [k]: modules[i] }\n      } else {\n        return obj\n      }\n    }, cityioData)\n    modulesData.tableName = tableName\n\n    dispatch(removeLoadingModules(loadingModules))\n\n    // send to cityio\n    dispatch(getCityioData(modulesData))\n    console.log('done updating from cityIO')\n\n    // initializes rendering of Menu and Map containers\n    dispatch(setReadyState(true))\n    dispatch(setLoadingState(false))\n  }\n\n  useEffect(() => {\n    //! only update if hashId changes\n    if (!hashId) {\n      return\n    }\n    // reset the state of loading flag\n    dispatch(setLoadingState(true))\n    // set Scenario Names and Ids\n    getScenarioIndices(tableName, (data) => dispatch(setScenarioNames(data)))\n    getModules()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [hashId])\n\n  return null\n}\n","export default __webpack_public_path__ + \"static/media/legoio.148c5ab6.png\";","import { Typography, Link, Card, CardContent } from '@material-ui/core'\n\nexport default function SelectedTable(props) {\n  const clicked = props.clicked\n  const cityscopeJSendpoint =\n    'https://cityscope.media.mit.edu/CS_cityscopeJS/?cityscope='\nconsole.log(clicked.object);\n\n  return (\n    <Card\n      elevation={15}\n      style={{\n        position: 'relative',\n        zIndex: 100,\n      }}\n    >\n      <CardContent>\n        <Typography variant=\"h2\" color=\"textPrimary\">\n          CityScope {clicked.object.tableName}\n        </Typography>\n        <Typography>\n          <Link\n            color={'secondary'}\n            href={cityscopeJSendpoint + clicked.object.tableName.toLowerCase()}\n          >\n            Go to project\n          </Link>{' '}\n          or{' '}\n          <Link\n            target={'blank'}\n            color={'secondary'}\n            href={clicked.object.tableURL}\n          >\n            view raw data on cityIO.\n          </Link>\n        </Typography>\n      </CardContent>\n    </Card>\n  )\n}\n","import { useEffect, useState } from 'react'\nimport { _MapContext } from 'react-map-gl'\nimport { DeckGL } from '@deck.gl/react'\nimport { _GlobeView as GlobeView, COORDINATE_SYSTEM } from '@deck.gl/core'\nimport { TileLayer } from '@deck.gl/geo-layers'\nimport { FlyToInterpolator } from 'deck.gl'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport { LineLayer, IconLayer, TextLayer, BitmapLayer } from '@deck.gl/layers'\nimport icon from './legoio.png'\n\nimport SelectedTable from './SelectedTable'\n\n// * draggable pin https://github.com/visgl/react-map-gl/tree/6.1-release/examples/draggable-markers\n\nexport default function CityIOdeckGLmap(props) {\n  const [markerInfo, setMarkerInfo] = useState([])\n  const [clicked, setClicked] = useState()\n  const [zoom, setZoom] = useState()\n  const INIT_VIEW = {\n    longitude: -71.060929,\n    latitude: 42.3545259,\n    zoom: 1,\n    pitch: 0,\n    bearing: 0,\n    zHeight: 2000000,\n  }\n\n  const [viewport, setViewport] = useState(INIT_VIEW)\n  const [initialViewState, setInitialViewState] = useState(viewport)\n  // boolean for hovering flag\n  let isHovering = false\n\n  useEffect(() => {\n    // set initial zoom level to refelct layers appearance\n    setZoom(INIT_VIEW.zoom)\n    document\n      .getElementById('deckgl-wrapper')\n      .addEventListener('contextmenu', (evt) => evt.preventDefault())\n  }, [INIT_VIEW.zoom])\n\n  useEffect(() => {\n    let markersArr = []\n    props.cityIOdata.forEach((table, index) => {\n      const RND_1 = Math.random() * 10\n      const RND_2 = Math.random() * 10\n      markersArr.push({\n        tableURL: table.tableURL,\n        tableName: table.tableName,\n        index: index,\n        tableHeader: table.tableHeader,\n        coord: {\n          from: [table.tableHeader.longitude, table.tableHeader.latitude],\n          to: [\n            table.tableHeader.longitude + RND_1,\n            table.tableHeader.latitude + RND_2,\n            INIT_VIEW.zHeight,\n          ],\n        },\n      })\n    })\n    setMarkerInfo(markersArr)\n  }, [props, INIT_VIEW.zHeight])\n\n  const layers = [\n    new TileLayer({\n      data:\n        'https://basemaps.cartocdn.com/rastertiles/dark_all/{z}/{x}/{y}.png',\n\n      /**\n       * \n       * TESTS WITH OTHER TILESETS  \n       * 'https://api.mapbox.com/v4/mapbox.mapbox-streets-v8/{z}/{x}/{y}.png' +\n      '?style=' +\n      'mapbox://styles/mapbox/dark-v10' +\n      'mapbox://styles/relnox/ck0h5xn701bpr1dqs3he2lecq' +\n      'mapbox://styles/relnox/cjs9rb33k2pix1fo833uweyjd' +\n      '&access_token=' +\n      process.env.REACT_APP_MAPBOX_TOKEN,\n\n     settings.map.mapStyle.sat,\n       'https://c.tile.openstreetmap.org/{z}/{x}/{y}.png',\n       */\n\n      minZoom: 0,\n      maxZoom: 19,\n      tileSize: 96,\n\n      renderSubLayers: (props) => {\n        const {\n          bbox: { west, south, east, north },\n        } = props.tile\n\n        return new BitmapLayer(props, {\n          data: null,\n          image: props.data,\n          _imageCoordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n          bounds: [west, south, east, north],\n        })\n      },\n    }),\n\n    new LineLayer({\n      id: 'LineLayer',\n      data: markerInfo,\n      pickable: true,\n      getWidth: zoom < 2 ? 2 : 0,\n      getSourcePosition: (d) => d.coord.from,\n      getTargetPosition: (d) => d.coord.to,\n      getColor: (d) => [255, 82, 120],\n    }),\n    new TextLayer({\n      id: 'text-layer',\n      data: markerInfo,\n      pickable: true,\n      getPosition: (d) => d.coord.to,\n      getText: (d) => d.tableName,\n      getColor: [255, 82, 120],\n      getSize: zoom < 2 ? 0 : 5,\n      getAngle: 0,\n      getPixelOffset: [10, 5],\n      getTextAnchor: 'start',\n      getAlignmentBaseline: 'center',\n    }),\n    new IconLayer({\n      id: 'icon-layer',\n      data: markerInfo,\n      pickable: true,\n      iconAtlas: icon,\n      onClick: (d) => {\n        setInitialViewState({\n          longitude: d.object.coord.to[0],\n          latitude: d.object.coord.to[1],\n          zoom: 3,\n          pitch: 0,\n          bearing: 0,\n          transitionDuration: 1000,\n          transitionInterpolator: new FlyToInterpolator(),\n        })\n\n        setClicked(d)\n      },\n      iconMapping: {\n        marker: { x: 0, y: 0, width: 768, height: 768, mask: false },\n      },\n      getIcon: (d) => 'marker',\n      sizeScale: 1,\n      getSize: zoom < 5 ? 30 : 15,\n      getPosition: (d) => [d.coord.to[0], d.coord.to[1], INIT_VIEW.zHeight],\n    }),\n  ]\n\n  return (\n    <>\n      {clicked && clicked.object && <SelectedTable clicked={clicked} />}\n\n      <DeckGL\n        views={new GlobeView()}\n        onHover={({ object }) => (isHovering = Boolean(object))}\n        getCursor={({ isDragging }) =>\n          isDragging ? 'grabbing' : isHovering ? 'crosshair' : 'grab'\n        }\n        layers={layers}\n        controller={true}\n        initialViewState={initialViewState}\n        onViewportChange={setViewport}\n        onViewStateChange={(d) => setZoom(d.viewState.zoom)}\n        ContextProvider={_MapContext.Provider}\n      ></DeckGL>\n    </>\n  )\n}\n","import { useEffect, useState } from 'react'\nimport CityIOdeckGLmap from './CityIOdeckGLmap/index'\n\nimport axios from 'axios'\nimport settings from '../../settings/settings.json'\n\nexport default function CityIOlist() {\n  const [tableList, setTableList] = useState([])\n  const [isLoading, setIsLoading] = useState(true)\n  const fetchCityIOtables = async () => {\n    // ! https://stackoverflow.com/questions/37213783/waiting-for-all-promises-called-in-a-loop-to-finish\n    const cityIOlistURL = settings.cityIO.ListOfTables\n    // get all URLs\n    const tablesArr = await axios.get(cityIOlistURL)\n    // create array of all requests\n    const requestArr = tablesArr.data.map(async (urlStr) => {\n      const tableName = urlStr.split('/').pop()\n      return axios\n        .get(urlStr + '/GEOGRID/properties/header')\n        .then((res) =>\n          setTableList((oldArray) => [\n            ...oldArray,\n            { tableURL: urlStr, tableName: tableName, tableHeader: res.data },\n          ]),\n        )\n        .catch((error) => console.log(error.toString()))\n    })\n\n    Promise.all(requestArr).then(() => {\n      return\n    })\n  }\n\n  useEffect(() => {\n    fetchCityIOtables().then(setIsLoading(false))\n  }, [])\n\n  return <>{!isLoading && <CityIOdeckGLmap cityIOdata={tableList} />}</>\n}\n","import React, { useState, useEffect } from 'react'\nimport Typography from '@material-ui/core/Typography'\n\nexport default function GetGITdate() {\n  const [gitMeta, setGitMeta] = useState({\n    author: '',\n    branch: '',\n    date: '',\n    sha: '',\n    link: '',\n  })\n\n  const URL =\n    'https://api.github.com/repos/CityScope/CS_cityscopeJS/branches/master'\n\n  const fetchGitHub = () =>\n    fetch(URL)\n      .then((response) => {\n        response.json().then((json) => {\n          setGitMeta({\n            author: json.commit.commit.author.name,\n            date: json.commit.commit.author.date,\n            sha: json.commit.sha,\n          })\n        })\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n  // run only once\n  useEffect(() => {\n    fetchGitHub()\n  }, [])\n\n  const gitMetaComp = (\n    <>\n      <Typography color={'primary'} variant={'h5'}>\n        CityScopeJS Development Tracking\n      </Typography>\n      <Typography color={'primary'}>\n        Author: {JSON.parse(JSON.stringify(gitMeta.author))}\n      </Typography>\n      <Typography color={'primary'}>\n        Date: {JSON.parse(JSON.stringify(gitMeta.date))}\n      </Typography>\n      <Typography color={'primary'}>\n        Hash: {JSON.parse(JSON.stringify(gitMeta.sha))}\n      </Typography>\n    </>\n  )\n\n  return gitMetaComp\n}\n","import {\n  Divider,\n  Typography,\n  makeStyles,\n  Card,\n  CardContent,\n  Link,\n} from '@material-ui/core'\nimport GitHubIcon from '@material-ui/icons/GitHub'\nimport GetGITdate from './GetGITdate'\n\nconst useStyles = makeStyles((theme) => ({\n  divider: {\n    margin: theme.spacing(2),\n  },\n}))\nexport default function SplashScreen() {\n  const classes = useStyles()\n\n  return (\n    <>\n      <Card elevation={15}>\n        <CardContent>\n          <Typography color=\"textPrimary\" variant=\"h1\">\n            MIT CityScope\n          </Typography>\n\n          <Divider className={classes.divider} light />\n\n          <Typography color=\"textPrimary\" variant=\"h4\">\n            MIT CityScope is an open-source urban modeling and simulation\n            platform. CityScope allows users to examine different design\n            alternatives, and observe their impact through multiple layers of\n            urban analytics modules, such as traffic models, ABM simulation,\n            urban access, economy, storm-water, noise and more.\n          </Typography>\n        </CardContent>\n      </Card>\n\n      <Divider className={classes.divider} light />\n\n      <Card elevation={15}>\n        <CardContent position={'bottom'}>\n          <Typography color=\"textPrimary\" gutterBottom>\n            MIT CityScopeJS open-source project is developed by MIT, the City\n            Science Network, and contributers from all over the world.\n          </Typography>\n\n          <Typography>\n            <Link\n              color={'secondary'}\n              href={'https://github.com/CityScope'}\n              target={'blank'}\n            >\n              <GitHubIcon fontSize={'small'} /> Join the CityScope open-source\n              development\n            </Link>\n          </Typography>\n        </CardContent>\n      </Card>\n\n      <Divider className={classes.divider} light />\n\n      <Card elevation={15}>\n        <CardContent position={'bottom'}>\n          <Typography color=\"textPrimary\" gutterBottom>\n            Map view is provided via CityIO, CityScope server.\n          </Typography>\n          <Typography>\n            <Link\n              color={'secondary'}\n              href={'https://github.com/CityScope/CS_CityIO'}\n              target={'blank'}\n            >\n              <GitHubIcon fontSize={'small'} />{' '}\n              https://github.com/CityScope/CS_CityIO\n            </Link>\n          </Typography>\n        </CardContent>\n      </Card>\n\n      <Divider className={classes.divider} light />\n\n      <Card elevation={15}>\n        <CardContent position={'bottom'}>\n          <GetGITdate />\n        </CardContent>\n      </Card>\n    </>\n  )\n}\n","import { makeStyles, Container } from '@material-ui/core'\nimport CityIOlist from './CityIOlist'\nimport Page from '../../layouts/Page'\nimport SplashScreen from './SplashScreen'\n\nexport default function CityIOviewer() {\n  const useStyles = makeStyles((theme) => ({\n    root: {\n      '& > *': {\n        margin: 'auto',\n        height: '100%',\n        padding: theme.spacing(3),\n      },\n    },\n    fixedPosition: {\n      position: 'relative',\n      zIndex: 100,\n    },\n  }))\n\n  const classes = useStyles()\n  return (\n    <>\n      <Page className={classes.root} title=\"CityScope Projects List\">\n        <div\n          style={{\n            height: '50vh',\n            width: '100%',\n            position: 'relative',\n          }}\n        >\n          <CityIOlist />\n        </div>\n\n        <Container className={classes.fixedPosition}>\n          <SplashScreen />\n        </Container>\n      </Page>\n    </>\n  )\n}\n","import settings from \"../settings/settings.json\";\n\n/**\n * ! INIT STATE\n */\nconst listOfToggles = Object.keys(settings.menu.toggles);\nlet menuInitState = [];\nfor (let i = 0; i < listOfToggles.length; i++) {\n    if (Object.values(settings.menu.toggles)[i].showOnInit) {\n        menuInitState.push(listOfToggles[i]);\n    }\n}\n\nconst initialState = {\n    MENU: menuInitState,\n    CITYIO: {},\n    SCENARIO_NAMES: [],\n    MAP: {},\n    LOADING_MODULES: [],\n    SLIDERS: {\n        time: [\n            settings.map.layers.ABM.startSimHour,\n            settings.map.layers.ABM.currentSimHour,\n            settings.map.layers.ABM.endSimHour,\n        ],\n        speed: settings.map.layers.ABM.animationSpeed,\n    },\n    ABM_MODE: \"mode\",\n    ACCESS_TOGGLE: 0,\n    SELECTED_TYPE: null,\n    READY: false,\n    LOADING: false,\n\n    /**\n     * ! EDITOR INIT STATE\n     */\n\n    ROW_EDIT: null,\n    BASE_MAP_CENTER: {\n        latCenter: null,\n        lonCenter: null,\n    },\n    TYPES_LIST: null,\n    GRID_CREATED: null,\n};\n\nexport default initialState;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Typography, Box } from \"@material-ui/core\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\n\n\nconst LoadingSpinner = () => {\n    const [loadingModules] = useSelector((state) => [state.LOADING_MODULES]);\n\n    return (\n        <>\n            {loadingModules.map((module, index) => {\n                return (\n                    <Box\n                        position=\"fixed\"\n                        bottom={index * 50}\n                        right=\"2vw\"\n                        width=\"10vw\"\n                        zIndex=\"101\"\n                        margin=\"0\"\n                        key={module}\n                    >\n                        <LinearProgress color={'secondary'} />\n                        <Typography\n                            variant=\"h6\"\n                            color=\"primary\"\n                            style={{ marginRight: \"10px\" }}\n                        >\n                            {module}\n                        </Typography>\n                    </Box>\n                );\n            })}\n        </>\n    );\n};\n\nexport default LoadingSpinner;\n","import {\n  GET_CITYIO_DATA,\n  MENU_INTERACTION,\n  LISTEN_TO_MAP_EVENTS,\n  LISTEN_TO_ABM_SLIDERS,\n  LISTEN_TO_EDIT_MENU,\n  SET_READY_STATE,\n  SET_LOADING_STATE,\n  SET_SCENARIO_NAMES,\n  LISTEN_TO_ACCESS_TOGGLE,\n  LISTEN_TO_ROW_EDIT,\n  LISTEN_TO_TYPES_LIST,\n  LISTEN_TO_GRID_CREATOR,\n  LISTEN_TO_BASE_MAP_CENTER,\n  LISTEN_TO_ABM_MODE,\n  ADD_LOADING_MODULES,\n  REMOVE_LOADING_MODULES,\n  SET_UI_WEBSOCKET_DATA,\n  SET_UI_WEBSOCKET_READY,\n} from './actions'\nimport initialState from './initialState'\n\n/**\n * REDUCER\n */\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case GET_CITYIO_DATA:\n      return { ...state, CITYIO: action.data }\n    case MENU_INTERACTION:\n      return { ...state, MENU: action.data }\n    case LISTEN_TO_MAP_EVENTS:\n      return { ...state, MAP: action.data }\n    case LISTEN_TO_ABM_SLIDERS:\n      return { ...state, SLIDERS: action.data }\n    case LISTEN_TO_ABM_MODE:\n      return { ...state, ABM_MODE: action.data }\n    case LISTEN_TO_ACCESS_TOGGLE:\n      return { ...state, ACCESS_TOGGLE: action.data }\n    case LISTEN_TO_EDIT_MENU:\n      return { ...state, SELECTED_TYPE: action.data }\n    case SET_READY_STATE:\n      return { ...state, READY: action.data }\n    case SET_LOADING_STATE:\n      return { ...state, LOADING: action.data }\n    case SET_SCENARIO_NAMES:\n      return { ...state, SCENARIO_NAMES: action.data }\n    case ADD_LOADING_MODULES:\n      return {\n        ...state,\n        LOADING_MODULES: [\n          ...new Set([...state.LOADING_MODULES, ...action.data]),\n        ],\n      }\n    case REMOVE_LOADING_MODULES:\n      return {\n        ...state,\n        LOADING_MODULES: state.LOADING_MODULES.filter(\n          (x) => !action.data.includes(x),\n        ),\n      }\n\n    /**\n     * PROJECTION MAPPING Actions\n     */\n    case SET_UI_WEBSOCKET_DATA:\n      return { ...state, UI_WEBSOCKET_DATA: action.data }\n\n    case SET_UI_WEBSOCKET_READY:\n      return { ...state, UI_WEBSOCKET_READY: action.data }\n\n    /**\n     * Editor Actions\n     */\n\n    case LISTEN_TO_ROW_EDIT:\n      return { ...state, ROW_EDIT: action.data }\n\n    case LISTEN_TO_TYPES_LIST:\n      return { ...state, TYPES_LIST: action.data }\n\n    case LISTEN_TO_GRID_CREATOR:\n      return { ...state, GRID_CREATED: action.data }\n\n    case LISTEN_TO_BASE_MAP_CENTER:\n      return { ...state, BASE_MAP_CENTER: action.data }\n\n    default:\n      return state\n  }\n}\n","import { createStore } from \"redux\";\nimport reducer from \"./reducer\";\n\nconst reduxDevTools =\n    window.__REDUX_DEVTOOLS_EXTENSION__ &&\n    window.__REDUX_DEVTOOLS_EXTENSION__();\n\nconst configureStore = () => {\n    const store = createStore(reducer, reduxDevTools);\n\n    if (process.env.NODE_ENV !== \"production\") {\n        if (module.hot) {\n            module.hot.accept(\"./reducer\", () => {\n                store.replaceReducer(reducer);\n            });\n        }\n    }\n\n    return store;\n};\n\nconst store = configureStore();\n\nexport default store;\n","import axios from 'axios'\nimport { addLoadingModules } from '../redux/actions'\nimport store from '../redux/store'\nimport settings from '../settings/settings.json'\nimport { LightingEffect, AmbientLight, _SunLight } from '@deck.gl/core'\n\n/**\n * conver rgb to hex\n */\nexport function rgbToHex(r, g, b) {\n  function valToHex(c) {\n    var hex = c.toString(16)\n    return hex.length === 1 ? '0' + hex : hex\n  }\n  return '#' + valToHex(r) + valToHex(g) + valToHex(b)\n}\n\n/**\n * conver hex to rgb array\n */\nexport function hexToRgb(hex) {\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n  return result\n    ? [\n        parseInt(result[1], 16),\n        parseInt(result[2], 16),\n        parseInt(result[3], 16),\n      ]\n    : null\n}\n\n/**\n *\n * @param {string} hexString test if vaild 3->6 HEX color\n */\nexport const testHex = (hexString) => {\n  let isHex = /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i.test(hexString)\n  return isHex\n}\n\n/**\n * Description. gets `props` with geojson\n * and procces the interactive area\n */\nexport const _proccessGridData = (cityioData) => {\n  // get the static grid\n  const GEOGRID = cityioData.GEOGRID\n  // if GEOGRRIDDATA exist and is the same length as our grid\n  if (\n    cityioData.GEOGRIDDATA &&\n    cityioData.GEOGRIDDATA.length === cityioData.GEOGRID.features.length\n  ) {\n    // get the grid data\n    const GEOGRIDDATA = cityioData.GEOGRIDDATA\n    // update GEOGRID features from GEOGRIDDATA on cityio\n    for (let i = 0; i < GEOGRID.features.length; i++) {\n      GEOGRID.features[i].properties = GEOGRIDDATA[i]\n\n      // inject id\n      GEOGRID.features[i].properties.id = i\n    }\n  }\n  const newGrid = JSON.parse(JSON.stringify(GEOGRID))\n  return newGrid\n}\n\n/**\n * Description. gets `props` with geojson\n * and procces the access layer data\n */\nexport const _proccessAccessData = (accessData) => {\n  // get colors from settings\n  let coordinates = accessData.features.map((d) => d.geometry.coordinates)\n  let values = accessData.features.map((d) => d.properties)\n  let heatmap = []\n  for (let i = 0; i < coordinates.length; i++) {\n    heatmap.push({\n      coordinates: coordinates[i],\n      values: values[i],\n    })\n  }\n  return heatmap\n}\n\n/**\n * checks if edits are done (toggled off)\n * than returns a redux state\n * with grid edits payload\n */\nexport const _postMapEditsToCityIO = (data, tableName, endPoint) => {\n  const expectUpdateModules = new Set(\n    settings.cityIO.cityIOmodules\n      .filter((val) => val.expectUpdate)\n      .map((val) => val.name),\n  )\n  const cityIOKeys = new Set(Object.keys(store.getState().CITYIO))\n\n  const loadingModules = [...cityIOKeys].filter((i) =>\n    expectUpdateModules.has(i),\n  )\n\n  let postURL =\n    'https://cityio.media.mit.edu/api/table/update/' + tableName + endPoint\n\n  const options = {\n    method: 'post',\n    url: postURL,\n    data: data,\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n    },\n  }\n  axios(options)\n    .then((res) => {\n      if (res.data.status === 'ok') {\n        store.dispatch(addLoadingModules(loadingModules))\n      }\n    })\n    .catch((error) => {\n      console.log('ERROR:', error)\n    })\n}\n\n// /**\n//  * Description. uses deck api to\n//  * collect objects in a region\n//  * @argument{object} e  picking event\n//  */\nexport const _multipleObjPicked = (e, pickingRadius, deckGLRef) => {\n  const dim = pickingRadius\n  const x = e.x - dim / 2\n  const y = e.y - dim / 2\n  let multipleObj = deckGLRef.current.pickObjects({\n    x: x,\n    y: y,\n    width: dim,\n    height: dim,\n  })\n  return multipleObj\n}\n\n// /**\n//  * Description. allow only to pick cells that are\n//  *  not of CityScope TUI & that are interactable\n//  * so to not overlap TUI activity\n//  */\nexport const _handleGridcellEditing = (\n  e,\n  selectedType,\n  setSelectedCellsState,\n  pickingRadius,\n  deckGLRef,\n) => {\n  const { height, color, name } = selectedType\n  const multiSelectedObj = _multipleObjPicked(e, pickingRadius, deckGLRef)\n  multiSelectedObj.forEach((selected) => {\n    const thisCellProps = selected.object.properties\n    if (thisCellProps && thisCellProps.interactive) {\n      thisCellProps.color = testHex(color) ? hexToRgb(color) : color\n      thisCellProps.height = height\n      thisCellProps.name = name\n    }\n  })\n  setSelectedCellsState(multiSelectedObj)\n}\n\nvar currentDateMidnight = new Date()\n// set initial midnight to GMT 0\ncurrentDateMidnight.setHours(0, 0, 0, 0)\n\nexport const _setupSunEffects = (effectsRef, tableHeader) => {\n  // get time zone from the tz value if exist\n  if (tableHeader.tz) {\n    currentDateMidnight.setHours(tableHeader.tz, 0, 0, 0)\n  }\n  const ambientLight = new AmbientLight({\n    color: [255, 255, 255],\n    intensity: 0.85,\n  })\n  const dirLight = new _SunLight({\n    timestamp: 0,\n    color: [255, 255, 255],\n    intensity: 1.0,\n    _shadow: true,\n  })\n  const lightingEffect = new LightingEffect({ ambientLight, dirLight })\n  lightingEffect.shadowColor = [0, 0, 0, 0.5]\n  effectsRef.current = [lightingEffect]\n}\n\nexport const updateSunDirection = (time, effectsRef) => {\n  const thisLocationTime = currentDateMidnight.getTime() + time * 1000\n  var date = new Date(thisLocationTime)\n\n  effectsRef.current[0].directionalLights[0].timestamp = Date.UTC(\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDay(),\n    date.getHours(),\n    date.getMinutes(),\n    date.getSeconds(),\n  )\n}\n","import React, { useState } from \"react\";\nimport { RadialChart, Hint } from \"react-vis\";\nimport { Typography } from \"@material-ui/core\";\n\nexport default function TypeInfo(props) {\n    const COLOR_SCALE = [\"#85C4C8\", \"#C22E00\", \"#1E96BE\", \"#EC9370\", \"#F6D18A\"];\n\n    const radialRadius = 50;\n    const [hoveredRadial, setHoveredRadial] = useState(false);\n\n    // method to create data for radial chart\n    const careateData = () => {\n        // array for data\n        let data = [];\n        // check type info: if string, parse, else object\n        let info = props.typeInfo;\n        // get the type data\n        info.forEach((attr, index) => {\n            data.push({\n                angle: attr.proportion,\n                label: JSON.stringify(attr.use),\n                color: COLOR_SCALE[index],\n            });\n        });\n\n        return data;\n    };\n\n    const data = careateData();\n\n    /*\n    const boxStyle = { height: \"10px\", width: \"10px\" };\n\n    function buildValue(hoveredCell) {\n        const { radius, angle, angle0 } = hoveredCell;\n        const truedAngle = (angle + angle0) / 2;\n        return {\n            x: radius * Math.cos(truedAngle),\n            y: radius * Math.sin(truedAngle),\n        };\n    }\n    */\n\n    return (\n        <>\n            <RadialChart\n                colorType=\"literal\"\n                animation={true}\n                className={\"donut-chart-example\"}\n                innerRadius={radialRadius / 2 - radialRadius / 5}\n                radius={radialRadius / 2}\n                getLabel={(d) => d.label}\n                showLabels={false}\n                getAngle={(d) => d.angle}\n                data={data}\n                onValueMouseOver={(evt) => {\n                    setHoveredRadial(evt);\n                }}\n                onSeriesMouseOut={() => setHoveredRadial(false)}\n                width={radialRadius}\n                height={radialRadius}\n                padAngle={0.1}\n            >\n                {hoveredRadial !== false && (\n                    <Hint value={hoveredRadial}>\n                        <div\n                            style={{\n                                background: \"rgba(0,0,0,0.8)\",\n                                fontSize: 10,\n                            }}\n                        >\n                            <Typography variant={\"caption\"} gutterBottom>\n                                {hoveredRadial.label}\n                            </Typography>\n                        </div>\n                    </Hint>\n                )}\n            </RadialChart>\n        </>\n    );\n}\n","import React from 'react'\nimport Slider from '@material-ui/core/Slider'\nimport { useSelector, useDispatch } from 'react-redux'\nimport List from '@material-ui/core/List'\nimport {\n  Collapse,\n  Typography,\n  CardContent,\n  Box,\n  Avatar,\n  ListItemAvatar,\n  ListItem,\n  ListItemText,\n  Grid,\n  Card,\n} from '@material-ui/core'\nimport Divider from '@material-ui/core/Divider'\nimport { listenToEditMenu } from '../../../../redux/actions'\nimport { connect } from 'react-redux'\nimport { testHex, hexToRgb } from '../../../../utils/utils'\nimport TypeInfo from './TypeInfo'\n\nfunction EditMenu(props) {\n  const [selectedIndex, setSelectedIndex] = React.useState(null)\n  const dispatch = useDispatch()\n  let selectedType = useSelector((state) => state.SELECTED_TYPE)\n  const height = selectedType ? selectedType.height : null\n\n  const marks = [\n    { value: 0, label: 'min' },\n    { value: 100, label: 'max' },\n  ]\n\n  const handleListItemClick = (event, name, typeProps) => {\n    // ! injects the type name into the attributes themselves\n    typeProps.name = name\n    setSelectedIndex(name)\n    dispatch(listenToEditMenu(typeProps))\n  }\n\n  const parseTypeInfo = (typeInfo) => {\n    //! check type info: if string, parse, else object\n    let info = typeof typeInfo == 'string' ? JSON.parse(typeInfo) : typeInfo\n    return info\n  }\n\n  // create the types themselves\n  const createTypesIcons = (LanduseTypesList) => {\n    let iconsArr = []\n    Object.keys(LanduseTypesList).forEach((type, index) => {\n      // get type description if exist\n      let description = LanduseTypesList[type].description\n        ? LanduseTypesList[type].description\n        : null\n\n      let col = LanduseTypesList[type].color\n      // get the LBCS/NAICS types info\n      let LBCS = parseTypeInfo(\n        props.cityioData.GEOGRID.properties.types[type].LBCS,\n      )\n      let NAICS = parseTypeInfo(\n        props.cityioData.GEOGRID.properties.types[type].NAICS,\n      )\n\n      if (testHex(col)) {\n        col = hexToRgb(col)\n      }\n      let rgbCol = 'rgb(' + col[0] + ',' + col[1] + ',' + col[2] + ')'\n      const selected = selectedIndex === type\n      let typeHasHeightProps = false\n      if (LanduseTypesList[type].height) {\n        typeHasHeightProps = true\n      }\n\n      iconsArr.push(\n        <div key={Math.random()}>\n          <ListItem\n            alignItems=\"flex-start\"\n            button\n            key={Math.random()}\n            variant=\"raised\"\n            selected={selected}\n            onClick={(event) =>\n              handleListItemClick(event, type, LanduseTypesList[type])\n            }\n          >\n            <ListItemAvatar>\n              <Avatar\n                style={{\n                  backgroundColor: rgbCol,\n                  color: 'black',\n                }}\n              >\n                {type.charAt(0)}\n              </Avatar>\n            </ListItemAvatar>\n\n            <ListItemText primary={type} />\n          </ListItem>\n\n          <Collapse in={selected}>\n            <Box spacing={1} p={1} m={1}>\n              <Card elevation={15}>\n                <CardContent>\n                  <Typography variant=\"h5\">Type Information</Typography>\n\n                  {description && (\n                    <Typography variant=\"caption\">{description}</Typography>\n                  )}\n                  <Box spacing={1} p={1} m={1} />\n                  <Grid container spacing={3}>\n                    <Grid item xs={6} l={6} md={6} xl={6} container>\n                      {LBCS && (\n                        <>\n                          <Typography variant=\"caption\">LBCS</Typography>\n\n                          <TypeInfo typeInfo={LBCS} />\n                        </>\n                      )}\n                    </Grid>\n                    <Grid item xs={6} l={6} md={6} xl={6} container>\n                      {NAICS && (\n                        <>\n                          <Typography variant=\"caption\">NAICS</Typography>\n                          <TypeInfo typeInfo={NAICS} />\n                        </>\n                      )}\n                    </Grid>\n\n                    {typeHasHeightProps && (\n                      <>\n                        <Grid item xs={10} l={10} md={10} xl={10} container>\n                          <Typography gutterBottom>Set Height</Typography>\n\n                          <Slider\n                            value={height}\n                            valueLabelDisplay=\"auto\"\n                            onChange={(event, value) =>\n                              dispatch(\n                                listenToEditMenu({\n                                  ...selectedType,\n                                  height: value,\n                                }),\n                              )\n                            }\n                            getAriaLabel={(index) => index.toString()}\n                            min={marks[0].value}\n                            max={marks[1].value}\n                            marks={marks}\n                          />\n                        </Grid>\n                      </>\n                    )}\n                  </Grid>\n                </CardContent>\n              </Card>\n            </Box>\n          </Collapse>\n\n          <Divider />\n        </div>,\n      )\n    })\n    return <List>{iconsArr}</List>\n  }\n\n  return <>{createTypesIcons(props.cityioData.GEOGRID.properties.types)}</>\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    cityioData: state.CITYIO,\n  }\n}\n\nexport default connect(mapStateToProps, null)(EditMenu)\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles({\n    root: {\n        width: \"80%\",\n        marginLeft: 28,\n    },\n    subtitle1: {\n        marginTop: 12,\n    },\n    subtitle2: {\n        marginTop: 12,\n    },\n});\n","import React from \"react\";\nimport { DiscreteColorLegend } from \"react-vis\";\nimport Typography from \"@material-ui/core/Typography\";\n\n// ! https://github.com/uber/react-vis/blob/premodern/showcase/legends/searchable-discrete-color.js\n\nexport default function ABMLegend(props) {\n    const tripsAttr = props.trips.tripsData;\n    const modes = tripsAttr.mode;\n    const profiles = tripsAttr.profile;\n\n    const prepareLegendData = (string) => {\n        let data = string === \"mode\" ? modes : profiles;\n\n        let legendData = [];\n        for (const key in data) {\n            legendData.push({ title: data[key].name, color: data[key].color });\n        }\n        return legendData;\n    };\n\n    return (\n        <>\n            <Typography variant=\"h6\" gutterBottom>\n                {props.tripTypeValue === \"mode\" ? \"Mode Choise\" : \"Profiles \"}\n            </Typography>\n            <DiscreteColorLegend\n                height={300}\n                width={150}\n                items={prepareLegendData(props.tripTypeValue)}\n            />\n        </>\n    );\n}\n","import React from \"react\";\nimport { useStyles } from \"./styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Slider from \"@material-ui/core/Slider\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n    listenToSlidersEvents,\n    listenToABMmode,\n} from \"../../../../../redux/actions\";\nimport ABMLegend from \"./ABMLegend\";\n\nimport Radio from \"@material-ui/core/Radio\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\n\nconst marks = [\n    {\n        value: 0,\n        label: \"12AM\",\n    },\n    {\n        value: 21600,\n        label: \"6AM\",\n    },\n    {\n        value: 43200,\n        label: \"12PM\",\n    },\n    {\n        value: 64800,\n        label: \"6PM\",\n    },\n    {\n        value: 86400,\n        label: \"12AM\",\n    },\n];\n\nfunction ABMSubmenu(props) {\n    const classes = useStyles();\n    const sliders = useSelector((state) => state.SLIDERS);\n    const dispatch = useDispatch();\n\n    const handleSetTimeValue = (e, newValue) => {\n        dispatch(\n            listenToSlidersEvents({\n                ...sliders,\n                time: newValue,\n            })\n        );\n    };\n\n    const handleSetSpeedValue = (e, newValue) => {\n        dispatch(\n            listenToSlidersEvents({\n                ...sliders,\n                speed: newValue,\n            })\n        );\n    };\n\n    const [tripTypeValue, settripTypeValue] = React.useState(\"mode\");\n\n    const handleABMmodeChange = (event) => {\n        dispatch(listenToABMmode(event.target.value));\n        settripTypeValue(event.target.value);\n    };\n\n    return (\n        <div className={classes.root}>\n            <FormControl component=\"fieldset\">\n                <RadioGroup\n                    aria-label=\"tripType\"\n                    name=\"tripType\"\n                    value={tripTypeValue}\n                    onChange={handleABMmodeChange}\n                >\n                    <FormControlLabel\n                        value=\"mode\"\n                        control={<Radio />}\n                        label=\"Mode Choice\"\n                    />\n                    <FormControlLabel\n                        value=\"profile\"\n                        control={<Radio />}\n                        label=\"Profile\"\n                    />\n                </RadioGroup>\n            </FormControl>\n\n            <ABMLegend trips={props} tripTypeValue={tripTypeValue} />\n            <Typography\n                className={classes.subtitle1}\n                variant=\"subtitle2\"\n                id=\"range-slider\"\n                gutterBottom\n            >\n                Simulation Range\n            </Typography>\n            <Slider\n                min={0}\n                max={86400}\n                marks={marks}\n                value={sliders.time}\n                onChange={handleSetTimeValue}\n                valueLabelDisplay=\"off\"\n                aria-labelledby=\"range-slider\"\n            />\n            <Typography\n                className={classes.subtitle2}\n                variant=\"subtitle2\"\n                id=\"continuous-slider\"\n                gutterBottom\n            >\n                Simulation Speed\n            </Typography>\n            <Slider\n                min={0}\n                max={100}\n                value={sliders.speed}\n                onChange={handleSetSpeedValue}\n                valueLabelDisplay=\"auto\"\n                aria-labelledby=\"continuous-slider\"\n            />\n        </div>\n    );\n}\n\nexport default ABMSubmenu;\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles({\n    root: {\n        width: \"80%\",\n        marginLeft: 28,\n    },\n    subtitle1: {\n        marginTop: 12,\n    },\n    subtitle2: {\n        marginTop: 12,\n    },\n});\n","import React from \"react\";\nimport { useStyles } from \"./styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Slider from \"@material-ui/core/Slider\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { listenToSlidersEvents } from \"../../../../../redux/actions\";\n\nfunction ShadowSubmenu() {\n    const classes = useStyles();\n\n    const sliders = useSelector((state) => state.SLIDERS);\n\n    const dispatch = useDispatch();\n\n    const handleSetTimeValue = (e, newValue) => {\n        dispatch(\n            listenToSlidersEvents({\n                ...sliders,\n                time: newValue,\n            })\n        );\n    };\n\n    const marks = [\n        {\n            value: 0,\n            label: \"12AM\",\n        },\n        {\n            value: 21600,\n            label: \"6AM\",\n        },\n        {\n            value: 43200,\n            label: \"12PM\",\n        },\n        {\n            value: 64800,\n            label: \"6PM\",\n        },\n        {\n            value: 86400,\n            label: \"12AM\",\n        },\n    ];\n\n    return (\n        <div className={classes.root}>\n            <Typography\n                className={classes.subtitle1}\n                variant=\"subtitle2\"\n                id=\"range-slider\"\n                gutterBottom\n            >\n                Time of day\n            </Typography>\n            <Slider\n                min={0}\n                max={86400}\n                marks={marks}\n                value={sliders.time}\n                onChange={handleSetTimeValue}\n                valueLabelDisplay=\"off\"\n                aria-labelledby=\"range-slider\"\n            />\n        </div>\n    );\n}\n\nexport default ShadowSubmenu;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport { listenToAccessToggle } from \"../../../../../redux/actions\";\nimport Switch from \"@material-ui/core/Switch\";\nimport { ContinuousColorLegend } from \"react-vis\";\n\nimport settings from \"../../../../../settings/settings.json\";\n\nfunction AccessSubmenu(props) {\n    const accessToggle = useSelector((state) => state.ACCESS_TOGGLE);\n\n    const { cityioData } = props;\n\n    const ACCESS_PROPERTIES =\n        cityioData && cityioData.access && cityioData.access.properties\n            ? cityioData.access.properties\n            : [];\n\n    const dispatch = useDispatch();\n    const c = settings.map.layers.heatmap.colors;\n    const l = c.length - 1;\n    return (\n        <List>\n            <ListItem>\n                <ContinuousColorLegend\n                    width={500}\n                    startColor={\n                        \"rgb(\" + c[0][0] + \",\" + c[0][1] + \",\" + c[0][2] + \")\"\n                    }\n                    endColor={\n                        \"rgb(\" + c[l][0] + \",\" + c[l][1] + \",\" + c[l][2] + \")\"\n                    }\n                    startTitle=\"No Access\"\n                    endTitle=\"Full Access\"\n                />\n            </ListItem>\n            {ACCESS_PROPERTIES.map((p, i) => (\n                <ListItem key={p}>\n                    <ListItemText\n                        primary={p}\n                        style={{ textTransform: \"capitalize\" }}\n                    />\n                    <ListItemSecondaryAction>\n                        <Switch\n                            edge=\"end\"\n                            checked={accessToggle === i}\n                            onChange={() => {\n                                dispatch(listenToAccessToggle(i));\n                            }}\n                        />\n                    </ListItemSecondaryAction>\n                </ListItem>\n            ))}\n        </List>\n    );\n}\n\nexport default AccessSubmenu;\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport settings from '../../../../settings/settings.json'\nimport Collapse from '@material-ui/core/Collapse'\nimport ABMSubmenu from './ABMSubmenu'\nimport ShadowSubmenu from './ShadowSubmenu'\nimport AccessSubmenu from './AccessSubmenu'\nimport Switch from '@material-ui/core/Switch'\n\nfunction TogglesMenu(props) {\n  const { handleToggle } = props\n\n  const { menuState, cityioData } = useSelector((state) => ({\n    menuState: state.MENU,\n    cityioData: state.CITYIO,\n  }))\n\n  const togglesMeta = settings.menu.toggles\n  const listOfToggles = Object.keys(togglesMeta)\n  /**\n   * gets props with initial menu state\n   * and turn on the layer on init\n   */\n  let togglesCompsArray = []\n  // array of loaded API modules\n  const loadedModules = Object.keys(cityioData)\n  // create each toggle\n  for (let i = 0; i < listOfToggles.length; i++) {\n    // check if the mdoule of this toggle\n    // was loaded on the API\n    let requireModule = togglesMeta[listOfToggles[i]].requireModule\n\n    const checked = menuState.includes(listOfToggles[i]) ? true : false\n\n    if (loadedModules.includes(requireModule) || requireModule === false) {\n      const thisToggle = (\n        <div key={listOfToggles[i]}>\n          <ListItem>\n            <Switch\n              key={Math.random()}\n              edge=\"start\"\n              onChange={handleToggle(listOfToggles[i])}\n              checked={checked}\n            />\n            <ListItemText primary={togglesMeta[listOfToggles[i]].displayName} />\n          </ListItem>\n\n          {\n            // ! Handle submenus of ABM/ACCESS\n\n            listOfToggles[i] === 'SHADOWS' && (\n              <Collapse in={checked}>\n                <ShadowSubmenu />\n              </Collapse>\n            )\n          }\n\n          {\n            // ! Handle submenus of ABM/ACCESS\n\n            listOfToggles[i] === 'ABM' && (\n              <Collapse in={checked}>\n                <ABMSubmenu tripsData={cityioData.ABM2.attr} />\n              </Collapse>\n            )\n          }\n          {listOfToggles[i] === 'ACCESS' && (\n            <Collapse\n              in={checked}\n              style={{\n                marginLeft: 24,\n              }}\n            >\n              <AccessSubmenu cityioData={cityioData} />\n            </Collapse>\n          )}\n        </div>\n      )\n      togglesCompsArray.push(thisToggle)\n    }\n  }\n\n  return <List>{togglesCompsArray}</List>\n}\n\nexport default TogglesMenu\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setLoadingState } from \"../../../../../../redux/actions\";\nimport settings from \"../../../../../../settings/settings.json\";\nimport axios from \"axios\";\nimport {\n    Button,\n    TextField,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n} from \"@material-ui/core\";\n\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\n\nexport default function SaveAsScenario(props) {\n    const maxNumOfScenarios = 10;\n    const [open, setOpen] = React.useState(false);\n    const [name, setName] = React.useState(\"\");\n    const dispatch = useDispatch();\n    const { tableName, toggleDrawer } = props;\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const cityioData = useSelector((state) => state.CITYIO);\n    const scenarioNames = useSelector((state) => state.SCENARIO_NAMES);\n\n    const getScenarioIndex = () => {\n        var getURL = settings.cityIO.baseURL + tableName + \"/meta/hashes\";\n        const options = {\n            method: \"get\",\n            url: getURL,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\",\n            },\n        };\n        axios(options)\n            .then((res) => {\n                const metaDataKeys = Object.keys(res.data);\n                const scenarioIndices = metaDataKeys\n                    .filter((str) => str.includes(\"scenarios\"))\n                    .map((str) => parseInt(str.replace(\"scenarios\", \"\")));\n                console.log(\"successfully got scenarios\");\n                const newScenarioIndex = scenarioIndices.length\n                    ? Math.max(...scenarioIndices) + 1\n                    : 0;\n                postScenario(newScenarioIndex);\n            })\n            .catch((err) => {\n                console.log(\"Error getting scenarios\", err);\n            });\n    };\n\n    const postScenario = (id) => {\n        const data = {\n            GEOGRIDDATA: cityioData.GEOGRIDDATA,\n            info: {\n                id,\n                name,\n            },\n        };\n\n        var postURL =\n            settings.cityIO.baseURL + \"update/\" + tableName + \"/scenarios\" + id;\n\n        const options = {\n            method: \"post\",\n            url: postURL,\n            data,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\",\n            },\n        };\n        axios(options)\n            .then((res) => {\n                console.log(\"Successfully saved grid data and network\");\n                dispatch(setLoadingState(false));\n                toggleDrawer();\n                handleClose();\n            })\n            .catch((error) => {\n                console.log(\"%c\" + error);\n                console.log(\"ERROR:\", error);\n                handleClose();\n            });\n    };\n\n    return (\n        <>\n            <Button\n                disabled={scenarioNames.length >= maxNumOfScenarios}\n                variant=\"outlined\"\n                color=\"default\"\n                onClick={handleClickOpen}\n                startIcon={<CloudUploadIcon />}\n            >\n                Save Scenario\n            </Button>\n            <Dialog\n                open={open}\n                onClose={handleClose}\n                aria-labelledby=\"form-dialog-title\"\n            >\n                <DialogTitle id=\"form-dialog-title\">Save Scenario</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>Name:</DialogContentText>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"name\"\n                        fullWidth\n                        value={name}\n                        onChange={(event) => setName(event.target.value)}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"default\">\n                        Cancel\n                    </Button>\n                    <Button\n                        onClick={() => {\n                            dispatch(setLoadingState(true));\n                            getScenarioIndex();\n                        }}\n                        color=\"default\"\n                    >\n                        Save\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n}\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n    setScenarioNames,\n    setLoadingState,\n} from \"../../../../../../redux/actions\";\nimport axios from \"axios\";\nimport settings from \"../../../../../../settings/settings.json\";\nimport { ListItem, Button, Typography, List } from \"@material-ui/core\";\nimport { _postMapEditsToCityIO } from \"../../../../../../utils/utils\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport { getScenarioIndices } from \"../../../../CityIO/utils\";\n\nfunction ScenarioItems(props) {\n    const cityioData = useSelector((state) => state.CITYIO);\n    const scenarioNames = useSelector((state) => state.SCENARIO_NAMES);\n    const dispatch = useDispatch();\n\n    const getScenario = (tableName, id) => {\n        const getURL = settings.cityIO.baseURL + tableName + \"/scenarios\" + id;\n        const options = {\n            method: \"get\",\n            url: getURL,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\",\n            },\n        };\n        axios(options)\n            .then((res) => {\n                const { GEOGRIDDATA } = res.data;\n                _postMapEditsToCityIO(\n                    GEOGRIDDATA,\n                    cityioData.tableName,\n                    \"/GEOGRIDDATA\"\n                );\n            })\n            .catch((error) => {\n                console.log(\"ERROR:\", error);\n            });\n    };\n\n    const deleteScenario = (tableName, id) => {\n        const getURL =\n            settings.cityIO.baseURL + \"clear/\" + tableName + \"/scenarios\" + id;\n        const options = {\n            method: \"get\",\n            url: getURL,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\",\n            },\n        };\n        axios(options)\n            .then((res) => {\n                getScenarioIndices(\n                    cityioData.tableName,\n                    (data) => dispatch(setScenarioNames(data)),\n                    (state) => dispatch(setLoadingState(state))\n                );\n            })\n            .catch((error) => {\n                console.log(\"ERROR:\", error);\n            });\n    };\n\n    const generateListItems = () =>\n        scenarioNames.map((scenario) => (\n            <ListItem key={scenario.id}>\n                <Button\n                    style={{ textTransform: \"none\" }}\n                    onClick={() => {\n                        dispatch(setLoadingState(true));\n                        getScenario(cityioData.tableName, scenario.id);\n                    }}\n                >\n                    <Typography variant=\"h6\">{scenario.name}</Typography>\n                </Button>\n                <Button\n                    onClick={() => {\n                        dispatch(setLoadingState(true));\n                        deleteScenario(cityioData.tableName, scenario.id);\n                    }}\n                >\n                    <CancelIcon />\n                </Button>\n            </ListItem>\n        ));\n\n    return <List>{generateListItems()}</List>;\n}\n\nexport default ScenarioItems;\n","import React from \"react\";\nimport SaveAsScenario from \"./components/SaveAsScenario\";\nimport ScenarioItems from \"./components/ScenarioItems\";\nimport { List, ListItem, Divider } from \"@material-ui/core\";\n\nexport default function SaveMenu(props) {\n    const { tableName } = props;\n\n    return (\n        <List>\n            <ListItem>\n                <SaveAsScenario tableName={tableName} />\n            </ListItem>\n            <ListItem>\n                <Divider />\n            </ListItem>\n            <ListItem>\n                <ScenarioItems />\n            </ListItem>\n        </List>\n    );\n}\n","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { listenToMenuUI } from '../../../redux/actions'\nimport EditMenu from './EditMenu'\nimport TogglesMenu from './TogglesMenu'\nimport SaveMenu from './SaveMenu'\nimport { Button, Typography, List, ListItem } from '@material-ui/core'\nimport EditIcon from '@material-ui/icons/Edit'\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload'\nimport NavigationIcon from '@material-ui/icons/Navigation'\n\nfunction MenuContainer(props) {\n  const { tableName } = props\n  const menuState = useSelector((state) => state.MENU)\n  const dispatch = useDispatch()\n\n  const handleToggle = (value) => () => {\n    const i = menuState.indexOf(value)\n    const updatedMenuState = [...menuState]\n    if (i === -1) {\n      updatedMenuState.push(value)\n    } else {\n      updatedMenuState.splice(i, 1)\n    }\n\n    dispatch(listenToMenuUI(updatedMenuState))\n  }\n\n  return (\n    <>\n      <List>\n        <ListItem>\n          <Typography variant={'h2'}>Grid Edit</Typography>\n        </ListItem>\n        <ListItem>\n          <Button\n            key={Math.random()}\n            startIcon={\n              menuState.includes('EDIT') ? (\n                <>\n                  <CloudUploadIcon />\n                  Send to cityIO\n                </>\n              ) : (\n                <>\n                  <EditIcon />\n                  Edit Mode\n                </>\n              )\n            }\n            color=\"default\"\n            onClick={handleToggle('EDIT')}\n          ></Button>\n        </ListItem>\n\n        <EditMenu />\n\n        <ListItem>\n          <Typography variant={'h2'}>Scenarios</Typography>\n        </ListItem>\n        <ListItem>\n          <SaveMenu tableName={tableName} handleToggle={handleToggle} />\n        </ListItem>\n        <ListItem>\n          <Typography variant={'h2'}>View Options</Typography>\n        </ListItem>\n        <ListItem>\n          <Button\n            startIcon={\n              <>\n                <NavigationIcon />\n                Reset View\n              </>\n            }\n            color=\"default\"\n            onClick={handleToggle('RESET_VIEW')}\n          />\n        </ListItem>\n      </List>\n\n      <TogglesMenu handleToggle={handleToggle} />\n    </>\n  )\n}\n\nexport default MenuContainer\n","import React from \"react\";\nimport { testHex, hexToRgb } from \"../../../../../utils/utils\";\nimport ErrorOutlineIcon from \"@material-ui/icons/ErrorOutline\";\n\n/**\n * cell selection\n * meta div\n * @param {*} props\n */\n\nexport const PaintBrush = (props) => {\n    if (!props.mousePos || !props.hoveredCells) return null;\n    const selectedType = props.selectedType;\n\n    const isInteractiveCell = props.hoveredCells.object.properties.interactive;\n    const mousePos = props.mousePos;\n    const divSize = props.divSize;\n    let col = selectedType.color;\n    if (testHex(col)) {\n        col = hexToRgb(col);\n    }\n    const color = \"rgb(\" + col[0] + \",\" + col[1] + \",\" + col[2] + \")\";\n    const colorTrans = \"rgba(\" + col[0] + \",\" + col[1] + \",\" + col[2] + \",0.6)\";\n    let mouseX = mousePos.clientX - divSize / 2;\n    let mouseY = mousePos.clientY - divSize / 2;\n\n    let msg = isInteractiveCell ? selectedType.name : \"Not-interactive\";\n    return (\n        <div\n            style={{\n                border: \"2px solid\",\n                backgroundColor: props.mouseDown ? colorTrans : \"rgba(0,0,0,0)\",\n                borderColor: color,\n                color: color,\n                borderRadius: \"15%\",\n                position: \"fixed\",\n                zIndex: 10,\n                pointerEvents: \"none\",\n                width: divSize,\n                height: divSize,\n                left: mouseX,\n                top: mouseY,\n            }}\n        >\n            <div\n                style={{\n                    position: \"relative\",\n                    left: divSize + 10,\n                    fontSize: \"0.8em\",\n                }}\n            >\n                {!isInteractiveCell && <ErrorOutlineIcon />}\n                {msg}:\n            </div>\n        </div>\n    );\n};\n","import React from \"react\";\n\n/**\n *\n * Cell meta comp\n */\n\nexport const CellMeta = (props) => {\n    if (!props.mousePos) return null;\n    const mousePos = props.mousePos;\n\n    return (\n        <div\n            style={{\n                borderRadius: \"10%\",\n                position: \"fixed\",\n                pointerEvents: \"none\",\n                backgroundColor: \"rgba(0,0,0,0.5)\",\n                padding: \"1vw\",\n                color: \"rgba(255,255,255,0.9)\",\n                zIndex: 10,\n                left: mousePos.clientX,\n                top: mousePos.clientY,\n                fontFamily:'monospace',\n                fontSize: \"0.65em\",\n                fontWeight: 500,\n            }}\n        >\n            <p>\n                Type:\n                {props.hoveredObj.object.properties.name}\n            </p>\n            <p>\n                Floors:\n                {props.hoveredObj.object.properties.height}\n            </p>\n            <p>\n                ID:\n                {props.hoveredObj.object.properties.id}\n            </p>\n        </div>\n    );\n};\n","import React from \"react\";\nimport { PaintBrush } from \"./PaintBrush\";\nimport { CellMeta } from \"../CellMeta\";\n\nexport default function PaintBrushContainer({\n    editOn,\n    mousePos,\n    selectedType,\n    pickingRadius,\n    mouseDown,\n    hoveredObj,\n}) {\n    if (editOn) {\n        return (\n            selectedType && (\n                <PaintBrush\n                    mousePos={mousePos}\n                    selectedType={selectedType}\n                    divSize={pickingRadius}\n                    mouseDown={mouseDown}\n                    hoveredCells={hoveredObj}\n                />\n            )\n        );\n    } else {\n        return (\n            hoveredObj && (\n                <CellMeta mousePos={mousePos} hoveredObj={hoveredObj} />\n            )\n        );\n    }\n}\n","import { Component } from \"react\";\n\nclass AnimationComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.animationFrame = null;\n    }\n\n    componentWillUnmount() {\n        if (this.animationFrame) {\n            window.cancelAnimationFrame(this.animationFrame);\n        }\n    }\n\n    componentDidMount() {\n        // start ainmation/sim/roate\n        this._animate();\n    }\n\n    _animate() {\n        const {\n            toggles: { rotateOn, ABMOn },\n            state: { viewState, sliders },\n            updaters: { listenToSlidersEvents, sunEffects, setViewState },\n            dispatch,\n        } = this.props;\n        if (rotateOn) {\n            let bearing = viewState.bearing ? viewState.bearing : 0;\n            bearing < 360 ? (bearing += 0.05) : (bearing = 0);\n            setViewState({\n                ...viewState,\n                bearing: bearing,\n            });\n        }\n\n        if (ABMOn) {\n            const time = sliders.time[1];\n            const speed = sliders.speed;\n            const startHour = sliders.time[0];\n            const endHour = sliders.time[2];\n\n            let t = parseInt(time) + parseInt(speed);\n            if (time < startHour || time > endHour) {\n                t = startHour;\n            }\n\n            dispatch(\n                listenToSlidersEvents({\n                    ...sliders,\n                    time: [sliders.time[0], t, sliders.time[2]],\n                })\n            );\n\n            // update sun position\n            if (sunEffects) {\n                sunEffects.updateSunDirection(t);\n            }\n        }\n        // ! start the req animation frame\n        this.animationFrame = window.requestAnimationFrame(\n            this._animate.bind(this)\n        );\n    }\n\n    render() {\n        return null;\n    }\n}\n\nexport default AnimationComponent;\n","import { ColumnLayer } from 'deck.gl'\nimport settings from '../../../../settings/settings.json'\nimport { useSelector } from 'react-redux'\n\nexport default function AccessLayer({ data, cellSize }) {\n  // return new HeatmapLayer({\n  //   id: 'ACCESS',\n  //   colorRange: settings.map.layers.heatmap.colors,\n  //   radiusPixels: 200,\n  //   opacity: 0.5,\n  //   threshold: 0.5,\n  //   data,\n  //   getPosition: (d) => d.coordinates,\n  //   getWeight: (d) => d.values[accessToggle],\n  //   updateTriggers: {\n  //     getWeight: [accessToggle],\n  //   },\n  // })\n  const accessToggle = useSelector((state) => [state.ACCESS_TOGGLE])\n  return new ColumnLayer({\n    id: 'column-layer',\n    data,\n    shadowEnabled: false,\n\n    material: false,\n    diskResolution: 12,\n    radius: cellSize,\n    extruded: true,\n    pickable: true,\n    elevationScale: 100,\n    getPosition: (d) => d.coordinates,\n    colorRange: settings.map.layers.heatmap.colors,\n    getFillColor: (d) => [255 * d.values[accessToggle], 82, 120, 200],\n    getLineColor: [0, 0, 0],\n    getElevation: (d) => d.values[accessToggle],\n    updateTriggers: {\n      getElevation: [accessToggle],\n      getFillColor: [accessToggle],\n    },\n    transitions: {\n      getFillColor: 500,\n      getElevation: 200,\n    },\n  })\n}\n","import { PathLayer } from \"deck.gl\";\nimport { hexToRgb } from \"../../../../utils/utils\";\n\nexport default function AggregatedTripsLayer({ data, cityioData, ABMmode }) {\n    return new PathLayer({\n        id: \"AGGREGATED_TRIPS\",\n        shadowEnabled: false,\n        data,\n        getPath: (d) => {\n            const noisePath =\n                Math.random() < 0.5\n                    ? Math.random() * 0.00005\n                    : Math.random() * -0.00005;\n            for (let i in d.path) {\n                d.path[i][0] = d.path[i][0] + noisePath;\n                d.path[i][1] = d.path[i][1] + noisePath;\n                d.path[i][2] = d.mode[0] * 2;\n            }\n            return d.path;\n        },\n        getColor: (d) => {\n            let col = hexToRgb(cityioData.ABM2.attr[ABMmode][d[ABMmode]].color);\n            return col;\n        },\n        opacity: 0.2,\n        getWidth: 1.5,\n\n        updateTriggers: {\n            getColor: ABMmode,\n        },\n        transitions: {\n            getColor: 500,\n        },\n    });\n}\n","import { TripsLayer } from '@deck.gl/geo-layers'\nimport { hexToRgb } from '../../../../utils/utils'\n\n//  * remap line width\nconst _remapValues = (value) => {\n  let remap = value > 15 && value < 25 ? 3 : value < 15 && value > 10 ? 12 : 30\n  return remap\n}\n\nexport default function ABMLayer({\n  data,\n  cityioData,\n  ABMmode,\n  zoomLevel,\n  sliders,\n}) {\n  return new TripsLayer({\n    id: 'ABM',\n    data,\n    getPath: (d) => d.path,\n    getTimestamps: (d) => d.timestamps,\n    getColor: (d) => {\n      let col = hexToRgb(cityioData.ABM2.attr[ABMmode][d[ABMmode]].color)\n      return col\n    },\n    shadowEnabled: false,\n    getWidth: 1,\n    widthScale: _remapValues(zoomLevel),\n    opacity: 0.8,\n    rounded: true,\n    trailLength: 500,\n    currentTime: sliders.time[1],\n\n    updateTriggers: {\n      getColor: ABMmode,\n    },\n    transitions: {\n      getColor: 500,\n    },\n  })\n}\n","import { GeoJsonLayer } from \"deck.gl\";\nimport { _handleGridcellEditing } from \"../../../../utils/utils\";\n\nexport default function GridLayer({\n    data,\n    editOn,\n    state: { selectedType, keyDownState, selectedCellsState, pickingRadius },\n    updaters: { setSelectedCellsState, setDraggingWhileEditing, setHoveredObj },\n    deckGL,\n}) {\n    return new GeoJsonLayer({\n        id: \"GRID\",\n        data,\n        pickable: true,\n        extruded: true,\n        wireframe: true,\n        lineWidthScale: 1,\n        lineWidthMinPixels: 2,\n        getElevation: (d) => d.properties.height,\n        getFillColor: (d) => d.properties.color,\n\n        onClick: (event) => {\n            if (selectedType && editOn && keyDownState !== \"Shift\")\n                _handleGridcellEditing(\n                    event,\n                    selectedType,\n                    setSelectedCellsState,\n                    pickingRadius,\n                    deckGL\n                );\n        },\n\n        onDrag: (event) => {\n            if (selectedType && editOn && keyDownState !== \"Shift\")\n                _handleGridcellEditing(\n                    event,\n                    selectedType,\n                    setSelectedCellsState,\n                    pickingRadius,\n                    deckGL\n                );\n        },\n\n        onDragStart: () => {\n            if (selectedType && editOn && keyDownState !== \"Shift\") {\n                setDraggingWhileEditing(true);\n            }\n        },\n\n        onHover: (e) => {\n            if (e.object) {\n                setHoveredObj(e);\n            }\n        },\n\n        onDragEnd: () => {\n            setDraggingWhileEditing(false);\n        },\n        updateTriggers: {\n            getFillColor: selectedCellsState,\n            getElevation: selectedCellsState,\n        },\n        transitions: {\n            getFillColor: 500,\n            getElevation: 500,\n        },\n    });\n}\n","import { TextLayer } from \"@deck.gl/layers\";\n\nexport default function TextualLayer({ data, coordinates }) {\n    /*\n     * this layer takes textual layer procuded by a 3rd party\n     * module, and renders a text message near the grid cell\n     * defined in the data id attribute.\n     *\n     * data format:\n      [\n      {\"id\": 0, \"info\": \"yes!\" },   {\"id\": 10, \"info\": \"I'm on ID 10!\" }\n      ]\n     *\n     * coordinates format:\n     [\n       {\"info\": \"yes!\", coordinates: [-122.466233, 37.684638]},\n     ]\n     */\n\n    if (data && coordinates && coordinates.features) {\n        let textLayerData = [];\n\n        data.forEach((infoIteam) => {\n            textLayerData.push({\n                coordinates: [\n                    coordinates.features[infoIteam.id].geometry\n                        .coordinates[0][0][0],\n                    coordinates.features[infoIteam.id].geometry\n                        .coordinates[0][0][1],\n                    100,\n                ],\n                info: infoIteam.info,\n            });\n        });\n\n        return new TextLayer({\n            id: \"text-layer\",\n            data: textLayerData,\n            pickable: true,\n            getPosition: (d) => d.coordinates,\n            getText: (d) => d.info,\n            getColor: [255, 255, 255],\n            getSize: 30,\n            getAngle: 0,\n            getTextAnchor: \"middle\",\n            getAlignmentBaseline: \"center\",\n        });\n    }\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport PaintBrush from './components/PaintBrush'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { listenToSlidersEvents } from '../../../redux/actions'\nimport {\n  _proccessAccessData,\n  _proccessGridData,\n  _postMapEditsToCityIO,\n} from '../../../utils/utils'\nimport { StaticMap } from 'react-map-gl'\nimport DeckGL from '@deck.gl/react'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport settings from '../../../settings/settings.json'\nimport AnimationComponent from './components/AnimationComponent'\nimport { updateSunDirection, _setupSunEffects } from '../../../utils/utils'\nimport {\n  AccessLayer,\n  AggregatedTripsLayer,\n  ABMLayer,\n  GridLayer,\n  TextualLayer,\n} from './deckglLayers'\n\nexport default function Map() {\n  const [draggingWhileEditing, setDraggingWhileEditing] = useState(false)\n  const [selectedCellsState, setSelectedCellsState] = useState(null)\n  const [viewState, setViewState] = useState(settings.map.initialViewState)\n  const [keyDownState, setKeyDownState] = useState(null)\n  const [mousePos, setMousePos] = useState(null)\n  const [mouseDown, setMouseDown] = useState(null)\n  const [hoveredObj, setHoveredObj] = useState(null)\n  const [access, setAccess] = useState(null)\n  const [textualData, setTextualData] = useState(null)\n  const [GEOGRID, setGEOGRID] = useState(null)\n  const [ABM, setABM] = useState({})\n  const [loaded, setLoaded] = useState(false)\n  const effectsRef = useRef()\n  const deckGL = useRef()\n\n  const dispatch = useDispatch()\n\n  const pickingRadius = 40\n\n  const [\n    cityioDataState,\n    slidersState,\n    menuState,\n    selectedTypeState,\n    ABMmodeState,\n  ] = useSelector((state) => [\n    state.CITYIO,\n    state.SLIDERS,\n    state.MENU,\n\n    state.SELECTED_TYPE,\n    state.ABM_MODE,\n  ])\n\n  var ABMOn = menuState.includes('ABM')\n  var rotateOn = menuState.includes('ROTATE')\n  var shadowsOn = menuState.includes('SHADOWS')\n  var editOn = menuState.includes('EDIT')\n  var resetViewOn = menuState.includes('RESET_VIEW')\n\n  useEffect(() => {\n\n      \n    // fix deck view rotate\n    _rightClickViewRotate()\n    // setup sun effects\n    _setupSunEffects(effectsRef, cityioDataState.GEOGRID.properties.header)\n    // zoom map on CS table location\n    _setViewStateToTableHeader()\n    setLoaded(true)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    if (!loaded) return\n    updateSunDirection(slidersState.time[1], effectsRef)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [slidersState.time])\n\n  useEffect(() => {\n    if (!loaded) return\n    let shadowColor = shadowsOn ? [0, 0, 0, 0.5] : [0, 0, 0, 0]\n    effectsRef.current[0].shadowColor = shadowColor\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [shadowsOn])\n\n  useEffect(() => {\n    setGEOGRID(_proccessGridData(cityioDataState))\n\n    if (cityioDataState.access) {\n      setAccess(_proccessAccessData(cityioDataState.access))\n    }\n\n    if (cityioDataState.textual) {\n      setTextualData(cityioDataState.textual)\n    }\n\n    if (cityioDataState.ABM2) {\n      setABM(cityioDataState.ABM2)\n    }\n  }, [cityioDataState])\n\n  useEffect(() => {\n    if (!loaded) return\n    if (!editOn) {\n      let dataProps = []\n\n      for (let i = 0; i < GEOGRID.features.length; i++) {\n        dataProps[i] = GEOGRID.features[i].properties\n      }\n      _postMapEditsToCityIO(dataProps, cityioDataState.tableName, '/GEOGRIDDATA')\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editOn])\n\n  useEffect(() => {\n    if (!loaded) return\n    _setViewStateToTableHeader()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [resetViewOn])\n\n  const onViewStateChange = ({ viewState }) => {\n    setViewState(viewState)\n  }\n\n  // /**\n  //  * resets the camera viewport\n  //  * to cityIO header data\n  //  * https://github.com/uber/deck.gl/blob/master/test/apps/viewport-transitions-flyTo/src/app.js\n  //  */\n  const _setViewStateToTableHeader = () => {\n    const header = cityioDataState.GEOGRID.properties.header\n\n    setViewState({\n      ...viewState,\n      longitude: header.longitude,\n      latitude: header.latitude,\n      zoom: 15,\n      pitch: 0,\n      bearing: 360 - header.rotation,\n      orthographic: true,\n    })\n  }\n\n  // /**\n  //  * Description. fix deck issue\n  //  * with rotate right botton\n  //  */\n  const _rightClickViewRotate = () => {\n    document\n      .getElementById('deckgl-wrapper')\n      .addEventListener('contextmenu', (evt) => evt.preventDefault())\n  }\n\n  const layersKey = {\n    ABM: ABMLayer({\n      data: ABM.trips,\n      cityioData: cityioDataState,\n      ABMmode: ABMmodeState,\n      zoomLevel: viewState.zoom,\n      sliders: slidersState,\n    }),\n    AGGREGATED_TRIPS: AggregatedTripsLayer({\n      data: ABM.trips,\n      cityioData: cityioDataState,\n      ABMmode: ABMmodeState,\n    }),\n    GRID: GridLayer({\n      data: GEOGRID,\n      editOn: menuState.includes('EDIT'),\n      state: {\n        selectedType: selectedTypeState,\n        keyDownState,\n        selectedCellsState,\n        pickingRadius,\n      },\n      updaters: {\n        setSelectedCellsState,\n        setDraggingWhileEditing,\n        setHoveredObj,\n      },\n      deckGL,\n    }),\n    ACCESS: AccessLayer({\n      data: access,\n      cellSize: cityioDataState.GEOGRID.properties.header.cellSize,\n    }),\n    TEXTUAL: TextualLayer({\n      data: textualData && textualData,\n      coordinates: GEOGRID,\n    }),\n  }\n\n  const layerOrder = ['TEXTUAL', 'ABM', 'AGGREGATED_TRIPS', 'GRID', 'ACCESS']\n\n  const _renderLayers = () => {\n    let layers = []\n    for (var layer of layerOrder) {\n      if (menuState.includes(layer)) {\n        layers.push(layersKey[layer])\n      }\n    }\n    return layers\n  }\n\n  return (\n    <div\n      className=\"baseMap\"\n      onKeyDown={(e) => {\n        setKeyDownState(e.nativeEvent.key)\n      }}\n      onKeyUp={() => setKeyDownState(null)}\n      onMouseMove={(e) => setMousePos(e.nativeEvent)}\n      onMouseUp={() => setMouseDown(false)}\n      onMouseDown={() => setMouseDown(true)}\n    >\n      <PaintBrush\n        editOn={editOn}\n        mousePos={mousePos}\n        selectedType={selectedTypeState}\n        pickingRadius={pickingRadius}\n        mouseDown={mouseDown}\n        hoveredObj={hoveredObj}\n      />\n      <AnimationComponent\n        toggles={{ ABMOn, rotateOn }}\n        state={{ sliders: slidersState, viewState }}\n        updaters={{\n          listenToSlidersEvents,\n          updateSunDirection,\n          setViewState,\n        }}\n        dispatch={dispatch}\n      />\n\n      <DeckGL\n        ref={deckGL}\n        viewState={viewState}\n        onViewStateChange={onViewStateChange}\n        layers={_renderLayers()}\n        effects={effectsRef.current}\n        controller={{\n          touchZoom: true,\n          touchRotate: true,\n          dragPan: !draggingWhileEditing,\n          dragRotate: !draggingWhileEditing,\n          keyboard: false,\n        }}\n      >\n        <StaticMap\n          asyncRender={false}\n          dragRotate={true}\n          reuseMaps={true}\n          mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_TOKEN}\n          mapStyle={settings.map.mapStyle.sat}\n          preventStyleDiffing={true}\n        />\n      </DeckGL>\n    </div>\n  )\n}\n","import React, { useState, useEffect } from \"react\";\nimport { CircularGridLines, RadarChart, DiscreteColorLegend } from \"react-vis\";\nimport \"react-vis/dist/style.css\";\nimport \"./Radar.css\";\n\nconst radarSize = 300;\nconst colorRange = [\"#ff5278\", \"#660016\"];\n\nexport default function Radar(props) {\n    const [radarData, setRadarData] = useState(null);\n\n    const createRadarData = (indicators) => {\n        let r = {};\n        let f = {};\n        let domains = [];\n        for (let i = 0; i < indicators.length; i++) {\n            if (indicators[i].viz_type === \"radar\") {\n                r[indicators[i].name] = [indicators[i].value];\n                f[indicators[i].name] = [indicators[i].ref_value];\n                indicators[i].domain = [0, 1];\n                domains.push(indicators[i]);\n            }\n        }\n        return { radarData: [r, f], domains: domains };\n    };\n\n    useEffect(() => {\n        if (\n            props &&\n            props.cityioData &&\n            props.cityioData.indicators &&\n            props.cityioData.indicators.length > 0\n        ) {\n            const d = createRadarData(props.cityioData.indicators);\n            setRadarData(d);\n        }\n    }, [props]);\n\n    return (\n        <div>\n            {radarData && radarData.domains && (\n                <>\n                    <RadarChart\n                        className=\"Radar blur\"\n                        animation\n                        data={radarData.radarData}\n                        domains={radarData.domains}\n                        colorRange={colorRange}\n                        style={{\n                            polygons: {\n                                fillOpacity: 0.2,\n                                strokeWidth: 2,\n                            },\n                            axes: {\n                                text: {\n                                    opacity: 0,\n                                    fontWeight: 700,\n                                    fill: \"white\",\n                                    fontFamily: \"Roboto Mono\",\n                                },\n                                strokeWidth: 0,\n                            },\n                            labels: {\n                                fontFamily: \"Roboto Mono\",\n\n                                textAnchor: \"middle\",\n                                fontSize: 10,\n                                fill: \"white\",\n                            },\n                        }}\n                        margin={{\n                            left: radarSize / 6,\n                            top: radarSize / 6,\n                            bottom: radarSize / 6,\n                            right: radarSize / 6,\n                        }}\n                        width={radarSize}\n                        height={radarSize}\n                    >\n                        <CircularGridLines\n                            style={{\n                                fill: \"white\",\n                                fillOpacity: 0.1,\n                                backgroundColor: \"#FFF\",\n                                opacity: 0.5,\n                                stroke: \"white\",\n                                width: 0.1,\n                            }}\n                            tickValues={[...new Array(11)].map(\n                                (v, i) => i / 10 - 1\n                            )}\n                        />\n                    </RadarChart>\n                    <DiscreteColorLegend\n                        items={[\"Design\", \"Reference\"]}\n                        colors={colorRange}\n                        style={{\n                            fontFamily: \"Roboto Mono\",\n                        }}\n                    />\n                </>\n            )}\n        </div>\n    );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n    FlexibleWidthXYPlot,\n    XAxis,\n    YAxis,\n    VerticalBarSeries,\n} from \"react-vis\";\nimport \"react-vis/dist/style.css\";\nimport { Typography, Box } from \"@material-ui/core\";\n\nexport default function BarChart(props) {\n    const radarSize = 250;\n\n    /**\n   data format \n    [\n    { x: 2, y: 10 },\n    { x: 4, y: 5 },\n    { x: 12, y: 15 },\n    ]\n     */\n\n    const [barChartData, setBarChartData] = useState(null);\n    const [hoveredNode, setHoveredNode] = useState(null);\n\n    useEffect(() => {\n        if (\n            props &&\n            props.cityioData &&\n            props.cityioData.indicators &&\n            props.cityioData.indicators.length > 0\n        ) {\n            const d = generateData(props.cityioData.indicators);\n\n            setBarChartData(d.barChartData);\n        }\n    }, [props]);\n\n    const generateData = (indicators) => {\n        let dataArr = [];\n\n        for (let i = 0; i < indicators.length; i++) {\n            if (indicators[i].viz_type === \"bar\") {\n                dataArr.push({\n                    x: indicators[i].name,\n                    y: indicators[i].value,\n                });\n            }\n        }\n\n        return {\n            barChartData: dataArr,\n        };\n    };\n\n    return (\n        <>\n            {barChartData && (\n                <>\n                    <Box flexDirection=\"column\">\n                        <Box alignContent=\"center\" p={3}>\n                            <FlexibleWidthXYPlot\n                                opacity={0.2}\n                                xType=\"ordinal\"\n                                width={radarSize}\n                                height={radarSize}\n                                stackBy=\"y\"\n                                yDomain={[0, 1]}\n                            >\n                                <XAxis\n                                    style={{\n                                        text: {\n                                            fill: \"#FFF\",\n                                            fontFamily: \"Roboto Mono\",\n                                        },\n                                    }}\n                                    tickLabelAngle={90}\n                                />\n                                <YAxis style={{ text: { fill: \"#FFF\" } }} />\n                                <VerticalBarSeries\n                                    animation={true}\n                                    onValueMouseOver={(d) => {\n                                        setHoveredNode(d);\n                                    }}\n                                    data={barChartData}\n                                />\n                            </FlexibleWidthXYPlot>\n                        </Box>\n                        <Box alignContent=\"center\">\n                            {hoveredNode && (\n                                <>\n                                    <Typography variant=\"caption\" gutterBottom>\n                                        {hoveredNode.x}\n                                    </Typography>\n                                    <Box m={3} />\n                                    <Typography gutterBottom>\n                                        {hoveredNode.y}\n                                    </Typography>\n                                </>\n                            )}\n                        </Box>\n                    </Box>\n                </>\n            )}\n        </>\n    );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { rgbToHex } from \"../../../../utils/utils\";\nimport { RadialChart, Hint } from \"react-vis\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Typography from \"@material-ui/core/Typography\";\nimport \"../../../../../node_modules/react-vis/dist/style.css\";\n\nexport default function AreaCalc(props) {\n    const radialRadius = 250;\n    const [hoveredRadial, setHoveredRadial] = useState(false);\n    const [areaData, setAreaData] = useState(null);\n\n    useEffect(() => {\n        const calcArea = () => {\n            let gridProps = props.cityioData.GEOGRID.properties;\n            let cellSize = gridProps.header.cellSize;\n            let geoGridData = props.cityioData.GEOGRIDDATA;\n\n            let calcAreaObj = {};\n            geoGridData.forEach((gridCellData) => {\n                let typeName = gridCellData.name;\n                if (\n                    //    if this type is not null\n                    gridCellData.name !== \"None\"\n                ) {\n                    if (calcAreaObj.hasOwnProperty(typeName)) {\n                        calcAreaObj[typeName].count =\n                            calcAreaObj[typeName].count + 1;\n                        // avoid landuse with no height\n                        let height =\n                            gridCellData.height < 1 ? 1 : gridCellData.height;\n                        calcAreaObj[typeName].area =\n                            calcAreaObj[typeName].area + height * cellSize;\n                    } else {\n                        calcAreaObj[typeName] = {};\n                        calcAreaObj[typeName].area = 0;\n                        calcAreaObj[typeName].count = 0;\n                        calcAreaObj[typeName].name = typeName;\n                        calcAreaObj[typeName].color = rgbToHex(\n                            gridCellData.color[0],\n                            gridCellData.color[1],\n                            gridCellData.color[2]\n                        );\n                    }\n                }\n            });\n            //  convert to react-vis happy data format\n            let radialData = [];\n            for (const k in calcAreaObj) {\n                radialData.push(calcAreaObj[k]);\n            }\n\n            let data = {\n                children: radialData,\n                color: 1,\n            };\n\n            return data;\n        };\n        const d = calcArea();\n        setAreaData(d);\n    }, [props]);\n\n    return (\n        <List>\n            {areaData && areaData.children && (\n                <ListItem alignItems=\"center\">\n                    <RadialChart\n                        colorType=\"literal\"\n                        animation={true}\n                        className={\"donut-chart-example\"}\n                        innerRadius={radialRadius / 2 - radialRadius / 5}\n                        radius={radialRadius / 2}\n                        getLabel={(d) => d.name}\n                        labelsRadiusMultiplier={0.95}\n                        labelsStyle={{\n                            textAnchor: \"middle\",\n                            font: \"sans-serif\",\n                            fontSize: 11,\n                            fill: \"#FFF\",\n                            textShadow: \"2px 2px 2px #000\",\n                            fontFamily: \"Roboto Mono\",\n                        }}\n                        showLabels\n                        getAngle={(d) => d.area}\n                        data={areaData.children}\n                        onValueMouseOver={(evt) => setHoveredRadial(evt)}\n                        onSeriesMouseOut={() => setHoveredRadial(false)}\n                        width={radialRadius}\n                        height={radialRadius}\n                        padAngle={0.01}\n                    >\n                        {hoveredRadial !== false && (\n                            <Hint value={hoveredRadial}>\n                                <div\n                                    style={{\n                                        background: \"rgba(0,0,0,0.8)\",\n                                        fontSize: 14,\n                                    }}\n                                >\n                                    <Typography\n                                        variant={\"caption\"}\n                                        gutterBottom\n                                    >\n                                        Area: {hoveredRadial.area} sqm\n                                    </Typography>\n                                </div>\n                            </Hint>\n                        )}\n                    </RadialChart>\n                </ListItem>\n            )}\n\n            {hoveredRadial.name && (\n                <List>\n                    <ListItem>\n                        <Typography variant=\"caption\">\n                            {hoveredRadial.name}\n                        </Typography>\n                    </ListItem>\n                    <ListItem>\n                        <Typography>{hoveredRadial.area} sqm</Typography>\n                    </ListItem>\n                </List>\n            )}\n        </List>\n    );\n}\n","import React from \"react\";\nimport { List, ListItem, Divider } from \"@material-ui/core\";\nimport Radar from \"./Radar\";\nimport BarChart from \"./BarChart\";\nimport AreaCalc from \"./AreaCalc\";\n\nfunction VisContainer(props) {\n    return (\n        <>\n            {props.cityIOdata && (\n                <List>\n                    <ListItem alignItems=\"center\">\n                        <AreaCalc cityioData={props.cityIOdata} />\n                    </ListItem>\n\n                    <Divider />\n\n                    <ListItem>\n                        <Radar cityioData={props.cityIOdata} />\n                    </ListItem>\n\n                    <Divider />\n\n                    <ListItem>\n                        <BarChart cityioData={props.cityIOdata} />\n                    </ListItem>\n                </List>\n            )}\n        </>\n    );\n}\n\nexport default VisContainer;\n","import MenuContainer from './MenuContainer'\nimport MapContainer from './DeckglMap'\nimport LoadingSpinner from './CityIO/LoadingSpinner'\nimport VisContainer from './VisContainer'\nimport {\n  makeStyles,\n  Grid,\n  Card,\n  CardContent,\n  Container,\n} from '@material-ui/core'\nimport Page from '../../layouts/Page'\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: 'auto',\n    height: '100%',\n    paddingBottom: theme.spacing(3),\n    paddingTop: theme.spacing(3),\n  },\n}))\n\n\nexport default function CSjsMain(props) {\n  const classes = useStyles()\n  const tableName = props.tableName\n  const cityIOdata = props.cityIOdata\n\n  return (\n    <Page className={classes.root} title=\"CitySCopeJS\">\n      <LoadingSpinner />\n      <Container maxWidth={null}>\n        <Grid container spacing={5}>\n          <Grid item xs={6} l={3} md={3} xl={2} container>\n            <Grid item container direction=\"column\" spacing={2}>\n              <Grid item xs={12} l={12} md={12} xl={12}>\n                <Card\n                  elevation={15}\n                  style={{\n                    maxHeight: '85vh',\n                    overflow: 'auto',\n                  }}\n                >\n                  <CardContent>\n                    <MenuContainer tableName={tableName} />\n                  </CardContent>\n                </Card>\n              </Grid>\n            </Grid>\n          </Grid>\n\n          <Grid item xs={6} l={6} md={6} xl={8}>\n            <Card\n              elevation={15}\n              style={{\n                height: '85vh',\n                width: '100%',\n                position: 'relative',\n              }}\n            >\n              {/* <Test/> */}\n              <MapContainer />\n            </Card>\n          </Grid>\n          <Grid item xs={6} l={3} md={3} xl={2}>\n            <Card\n              elevation={15}\n              style={{\n                maxHeight: '85vh',\n                overflow: 'auto',\n              }}\n            >\n              <VisContainer cityIOdata={cityIOdata} />\n            </Card>\n          </Grid>\n        </Grid>\n      </Container>\n    </Page>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport CityIO from './CityIO/cityIO'\nimport CityIOviewer from '../CityIOviewer'\nimport LoadingSpinner from './CityIO/LoadingSpinner'\nimport CSjsMain from './CSjsMain'\n\nexport default function CityScopeJS() {\n  // get the table name for cityIO comp\n  const [tableName, setTableName] = useState()\n  const [isDone, setIsdone] = useState(false)\n  // on init, get the adress URL\n  // to search for  a table\n  useEffect(() => {\n    let url = window.location.toString()\n    let pre = 'cityscope='\n    let cityscopePrjName = url.substring(url.indexOf(pre) + pre.length)\n    // check URL for proper CS project link\n    if (url.indexOf(pre) !== -1 && cityscopePrjName.length > 0) {\n      setTableName(cityscopePrjName)\n    } else {\n      /** if failed to get table name from\n       * url location, resote to the\n       * CityIO viewer\n       *\n       */\n      setIsdone(true)\n    }\n  }, [])\n\n  // wait for 'ready' flag from cityIO when app is ready to start\n  const isReady = useSelector((state) => state.READY)\n  const cityIOdata = useSelector((state) => state.CITYIO)\n\n  return (\n    <>\n      {tableName && <CityIO tableName={tableName} />}\n      {isReady && <CSjsMain cityIOdata={cityIOdata} tableName={tableName} />}\n      {isDone && <CityIOviewer />}\n      <LoadingSpinner />\n    </>\n  )\n}\n","import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n    getCityioData,\n    setReadyState,\n    setLoadingState,\n    addLoadingModules,\n    removeLoadingModules,\n} from \"../../../redux/actions\";\nimport settings from \"../../../settings/settings.json\";\n\nconst getAPICall = async (URL) => {\n    try {\n        // ! should add 'retry' here\n        // ! https://stackoverflow.com/questions/56074531/how-to-retry-5xx-requests-using-axios\n        const response = await axios.get(URL);\n        return response.data;\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nexport default function CityIO(props) {\n    const { tableName } = props;\n    const [hashId, setHashId] = useState(null);\n    const [hashes, setHashes] = useState({});\n    const cityioURL = settings.cityIO.baseURL + tableName;\n    const cityioData = useSelector((state) => state.CITYIO);\n\n    const dispatch = useDispatch();\n\n    /**\n     * start fetching API hashes to check for new data\n     */\n    useEffect(() => {\n        const timer = setTimeout(update, settings.cityIO.interval);\n        console.log(\"reading cityIO every -> \" + settings.cityIO.interval + \"ms\");\n        return () => clearTimeout(timer);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    async function update() {\n        // recursively get hashes\n        const newHashId = await getAPICall(cityioURL + \"/meta/id\");\n        if (hashId !== newHashId) {\n            setHashId(newHashId);\n        }\n        setTimeout(update, settings.cityIO.interval);\n    }\n\n    async function getModules() {\n        const newHashes = await getAPICall(cityioURL + \"/meta/hashes\");\n        const promises = [];\n        const loadingModules = [];\n        const pickedModules = settings.cityIO.cityIOmodules.map((x) => x.name);\n        // for each of the modules in settings, add api call to promises\n        pickedModules.forEach((module) => {\n            if (hashes[module] !== newHashes[module]) {\n                promises.push(getAPICall(cityioURL + \"/\" + module));\n                loadingModules.push(module);\n            } else {\n                promises.push(null);\n            }\n        });\n        dispatch(addLoadingModules(loadingModules));\n        const modules = await Promise.all(promises);\n        setHashes(newHashes);\n\n        // update cityio object with modules data\n        const modulesData = pickedModules.reduce((obj, k, i) => {\n            if (modules[i]) {\n                console.log(`updating ${k}`);\n                return { ...obj, [k]: modules[i] };\n            } else {\n                return obj;\n            }\n        }, cityioData);\n        modulesData.tableName = tableName;\n\n        dispatch(removeLoadingModules(loadingModules));\n\n        // send to cityio\n        dispatch(getCityioData(modulesData));\n        console.log(\"done updating from cityIO\");\n\n        // initializes rendering of Menu and Map containers\n        dispatch(setReadyState(true));\n        dispatch(setLoadingState(false));\n    }\n\n    useEffect(() => {\n        //! only update if hashId changes\n        if (!hashId) {\n            return;\n        }\n        // reset the state of loading flag\n        dispatch(setLoadingState(true));\n        \n        getModules();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [hashId]);\n\n    return null;\n}\n","import { HeatmapLayer } from \"deck.gl\";\nimport settings from \"../../../../../settings/settings.json\";\n\nexport default function AccessLayer({ active, data, accessToggle }) {\n    return new HeatmapLayer({\n        visible: active,\n        id: \"ACCESS\",\n        colorRange: settings.map.layers.heatmap.colors,\n        radiusPixels: 200,\n        opacity: 0.5,\n        threshold: 0.5,\n        data,\n        getPosition: (d) => d.coordinates,\n        getWeight: (d) => d.values[accessToggle],\n        updateTriggers: {\n            getWeight: [accessToggle],\n        },\n    });\n}\n","import { PathLayer } from \"deck.gl\";\nimport { hexToRgb } from \"../../../../../utils/utils\";\n\nexport default function AggregatedTripsLayer({\n    active,\n    data,\n    cityioData,\n    ABMmode,\n}) {\n    return new PathLayer({\n        visible: active,\n        id: \"AGGREGATED_TRIPS\",\n        _shadow: false,\n        data,\n        getPath: (d) => {\n            const noisePath =\n                Math.random() < 0.5\n                    ? Math.random() * 0.00005\n                    : Math.random() * -0.00005;\n            for (let i in d.path) {\n                d.path[i][0] = d.path[i][0] + noisePath;\n                d.path[i][1] = d.path[i][1] + noisePath;\n                d.path[i][2] = d.mode[0] * 2;\n            }\n            return d.path;\n        },\n        getColor: (d) => {\n            let col = hexToRgb(cityioData.ABM2.attr[ABMmode][d[ABMmode]].color);\n            return col;\n        },\n        opacity: 0.2,\n        getWidth: 1.5,\n\n        updateTriggers: {\n            getColor: ABMmode,\n        },\n        transitions: {\n            getColor: 500,\n        },\n    });\n}\n","import { TripsLayer } from \"@deck.gl/geo-layers\";\nimport { hexToRgb } from \"../../../../../utils/utils\";\n\n//  * remap line width\nconst _remapValues = (value) => {\n    let remap =\n        value > 15 && value < 25 ? 3 : value < 15 && value > 10 ? 12 : 30;\n    return remap;\n};\n\nexport default function ABMLayer({\n    active,\n    data,\n    cityioData,\n    ABMmode,\n    zoomLevel,\n    time,\n}) {\n    return new TripsLayer({\n        id: \"ABM\",\n        data,\n        getPath: (d) => d.path,\n        getTimestamps: (d) => d.timestamps,\n        getColor: (d) => {\n            let col = hexToRgb(cityioData.ABM2.attr[ABMmode][d[ABMmode]].color);\n            return col;\n        },\n        visible: active,\n        getWidth: 1,\n        widthScale: _remapValues(zoomLevel),\n        opacity: 0.8,\n        rounded: true,\n        trailLength: 500,\n        currentTime: time,\n\n        updateTriggers: {\n            getColor: ABMmode,\n        },\n        transitions: {\n            getColor: 500,\n        },\n    });\n}\n","import { GeoJsonLayer } from \"deck.gl\";\n\nexport default function GridLayer({ active, data }) {\n    return new GeoJsonLayer({\n        visible: active,\n        id: \"GRID\",\n        data,\n        extruded: true,\n        wireframe: true,\n        lineWidthScale: 1,\n        lineWidthMinPixels: 2,\n        getElevation: (d) => d.properties.height,\n        getFillColor: (d) => d.properties.color,\n\n        transitions: {\n            getFillColor: 500,\n            getElevation: 500,\n        },\n    });\n}\n","import { useState, useEffect, useRef } from 'react'\nimport { useSelector } from 'react-redux'\nimport {\n  _proccessAccessData,\n  _proccessGridData,\n  _setupSunEffects,\n  updateSunDirection,\n} from '../../../../utils/utils'\nimport { StaticMap } from 'react-map-gl'\nimport DeckGL from '@deck.gl/react'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport settings from '../../../../settings/settings.json'\nimport {\n  AccessLayer,\n  AggregatedTripsLayer,\n  ABMLayer,\n  GridLayer,\n} from './deckglLayers'\n\nexport default function PrjDeckGLMap(props) {\n  const [viewState, setViewState] = useState(settings.map.initialViewState)\n  const [access, setAccess] = useState(null)\n  const [GEOGRID, setGEOGRID] = useState(null)\n  const [ABM, setABM] = useState({})\n  const effectsRef = useRef()\n  const deckGL = useRef()\n  const [cityioData] = useSelector((state) => [state.CITYIO])\n  const viewSettings = useSelector((state) => state.UI_WEBSOCKET_DATA)\n\n  useEffect(() => {\n    if (!effectsRef.current) {\n      return\n    }\n    updateSunDirection(props.viewSettings.time, effectsRef)\n  }, [props.viewSettings])\n\n  const _setViewStateToTableHeader = () => {\n    const header = cityioData.GEOGRID.properties.header\n\n    setViewState({\n      ...viewState,\n      longitude: header.longitude,\n      latitude: header.latitude,\n      zoom: 15,\n      pitch: 0,\n      bearing: 360 - header.rotation,\n      orthographic: true,\n    })\n  }\n\n  useEffect(() => {\n    // fix deck view rotate\n    _rightClickViewRotate()\n    // setup sun effects\n    _setupSunEffects(effectsRef, cityioData.GEOGRID.properties.header)\n\n    // on init, check if prev. local storage with\n    // view state exist. If so, load it.\n    if (localStorage.getItem('deckGLviewState')) {\n      console.log('loading prev. deckGLviewState...')\n      let vs = localStorage.getItem('deckGLviewState')\n      setViewState(JSON.parse(vs))\n    } else {\n      // zoom map on CS table location\n      _setViewStateToTableHeader()\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    effectsRef.current[0].shadowColor = [0, 0, 0, 1]\n  }, [cityioData.GEOGRID.properties.header])\n\n  useEffect(() => {\n    setGEOGRID(_proccessGridData(cityioData))\n    if (cityioData.access) {\n      setAccess(_proccessAccessData(cityioData))\n    }\n    if (cityioData.ABM2) {\n      setABM(cityioData.ABM2)\n    }\n  }, [cityioData])\n\n  const onViewStateChange = ({ viewState }) => {\n    //    save current view state to local sotrage\n    localStorage.setItem('deckGLviewState', JSON.stringify(viewState))\n\n    setViewState(viewState)\n  }\n\n  const _rightClickViewRotate = () => {\n    document\n      .getElementById('deckgl-wrapper')\n      .addEventListener('contextmenu', (evt) => evt.preventDefault())\n  }\n\n  const layersKey = {\n    ABM: ABMLayer({\n      active: viewSettings.ABMLayer.active,\n      data: ABM.trips,\n      cityioData: cityioData,\n      ABMmode: viewSettings.ABMLayer.ABMmode,\n      zoomLevel: viewSettings.ABMLayer.zoomLevel,\n      time: viewSettings.time,\n    }),\n    AGGREGATED_TRIPS: AggregatedTripsLayer({\n      active: viewSettings.AggregatedTripsLayer.active,\n      data: ABM.trips,\n      cityioData: cityioData,\n      ABMmode: viewSettings.AggregatedTripsLayer.ABMmode,\n    }),\n    GRID: GridLayer({\n      active: viewSettings.GridLayer.active,\n      data: GEOGRID,\n    }),\n    ACCESS: AccessLayer({\n      active: viewSettings.AccessLayer.active,\n      data: access,\n      accessToggle: viewSettings.AccessLayer.accessToggle,\n    }),\n  }\n\n  const layerOrder = ['ABM', 'AGGREGATED_TRIPS', 'GRID', 'ACCESS']\n\n  const _renderLayers = () => {\n    let layers = []\n    for (var layer of layerOrder) {\n      layers.push(layersKey[layer])\n    }\n    return layers\n  }\n\n  return (\n    <DeckGL\n      ref={deckGL}\n      viewState={viewState}\n      onViewStateChange={onViewStateChange}\n      layers={_renderLayers()}\n      effects={effectsRef.current}\n      controller={{\n        keyboard: false,\n      }}\n    >\n      <StaticMap\n        asyncRender={false}\n        dragRotate={true}\n        reuseMaps={true}\n        mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_TOKEN}\n        mapStyle={settings.map.mapStyle.sat}\n        preventStyleDiffing={true}\n      />\n    </DeckGL>\n  )\n}\n","import { Matrix3d, RectPoints, Vector } from \"./Keystoner\";\nconst { solve } = require(\"numeric\");\n\nexport const round = (num: number, precision: number) => {\n    var factor = Math.pow(10, precision);\n    var tempNumber = num * factor;\n    var roundedTempNumber = Math.round(tempNumber);\n    return roundedTempNumber / factor;\n};\n\n// tslint:disable-next-line:no-any\nexport const range = (num: number) =>\n    (Array as any)(num)\n        .fill()\n        .map((_: any, i: any) => i * i);\n\nexport const transformPointsToMatrix = (\n    sourcePoints: RectPoints,\n    targetPoints: RectPoints\n): Matrix3d => {\n    const a: number[][] = [];\n    const b: number[] = [];\n\n    for (let i = 0, n = sourcePoints.length; i < n; ++i) {\n        const [fromX, fromY] = sourcePoints[i];\n        const [toX, toY] = targetPoints[i];\n\n        a.push(\n            [fromX, fromY, 1, 0, 0, 0, -fromX * toX, -fromY * toX],\n            [0, 0, 0, fromX, fromY, 1, -fromX * toY, -fromY * toY]\n        );\n\n        b.push(toX, toY);\n    }\n\n    const h = solve(a, b, true);\n\n    return [\n        h[0],\n        h[3],\n        0,\n        h[6],\n        h[1],\n        h[4],\n        0,\n        h[7],\n        0,\n        0,\n        1,\n        0,\n        h[2],\n        h[5],\n        0,\n        1,\n    ].map((num) => round(num, 10)) as Matrix3d;\n};\n\nexport const matrixToTransform = (matrix: Matrix3d) =>\n    `matrix3d(${matrix.join(\", \")})`;\n\nexport const vectorToTransform = (vector: Vector) =>\n    `translate(${vector[0]}px, ${vector[1]}px)`;\n","import * as React from \"react\";\nimport { Anchor, Vector } from \"./Keystoner\";\nimport { vectorToTransform } from \"./util\";\n\nconst anchorSize = 20;\nconst halfAnchor = anchorSize / 1.5;\n\nconst styles = {\n    container: {\n        width: anchorSize,\n        height: anchorSize,\n        borderRadius: \"50%\",\n        position: \"absolute\" as \"absolute\",\n        border: \"1px solid white\",\n        cursor: \"move\",\n    },\n    \"top-left\": {\n        left: -halfAnchor,\n        top: -halfAnchor,\n    },\n    \"bottom-left\": {\n        left: -halfAnchor,\n        bottom: -halfAnchor,\n    },\n    \"top-right\": {\n        top: -halfAnchor,\n        right: -halfAnchor,\n    },\n    \"bottom-right\": {\n        bottom: -halfAnchor,\n        right: -halfAnchor,\n    },\n};\n\nexport interface Props {\n    position: Anchor;\n    onMouseEnter?: (position: Anchor) => void;\n    // tslint:disable-next-line:no-any\n    onMouseDown: (evt: any, position: Anchor) => void;\n    onMouseUp: (position: Anchor) => void;\n    translation: Vector;\n    style?: React.CSSProperties;\n    className?: string;\n}\n\nexport const AnchorComponent: React.StatelessComponent<Props> = ({\n    position,\n    translation,\n    onMouseEnter,\n    onMouseDown,\n    onMouseUp,\n    className = \"\",\n    style = {},\n}) => (\n    <div\n        onMouseEnter={() => onMouseEnter && onMouseEnter(position)}\n        onMouseDown={(evt) => onMouseDown(evt, position)}\n        onMouseUp={() => onMouseUp(position)}\n        className={className}\n        style={{\n            ...styles.container,\n            ...styles[position],\n            ...style,\n            transform: vectorToTransform(translation),\n        }}\n    />\n);\n","import * as React from \"react\";\nimport { AnchorComponent } from \"./anchor\";\nimport {\n    matrixToTransform,\n    transformPointsToMatrix,\n    vectorToTransform,\n} from \"./util\";\n\n\n// Component interfaces\nexport interface Props {\n    style?: React.CSSProperties;\n    className?: string;\n    isEditMode?: boolean;\n    x?: number;\n    y?: number;\n    anchorStyle?: React.CSSProperties;\n    anchorClassName?: string;\n}\n\nexport interface Context {\n    isEditMode: boolean;\n}\n\nexport interface State {\n    matrix: Matrix3d;\n    translateDelta: { [key: string]: Vector };\n    sourcePoints?: RectPoints;\n    transformOrigin: Vector;\n    containerTranslate: Vector;\n}\n\nconst styles = {\n    container: {\n        position: \"relative\" as \"relative\",\n    },\n};\n\n// Sorted\nexport type Anchor = \"top-left\" | \"top-right\" | \"bottom-right\" | \"bottom-left\";\nconst anchors: Anchor[] = [\n    \"top-left\",\n    \"top-right\",\n    \"bottom-right\",\n    \"bottom-left\",\n];\n\n// 4x4 matrix\nexport type Matrix3d = [\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number\n];\n\n// top-left, top-right, bottom-right, bottom-left\nexport type RectPoints = [Vector, Vector, Vector, Vector];\n\nexport type Vector = [number, number]; // [x, y]\n\nconst defaultMatrix: Matrix3d = [\n    1,\n    0,\n    0,\n    0,\n    0,\n    1,\n    0,\n    0,\n    0,\n    0,\n    1,\n    0,\n    0,\n    0,\n    0,\n    1, // second and third for x and y position of element\n];\n\nconst _setDeltaVal = () => {\n    let deltaInitVals: any = {};\n    anchors.forEach((e) => {\n        deltaInitVals[e] = [0, 0];\n    });\n    return deltaInitVals;\n};\n\nexport default class Keystoner extends React.Component<Props, State> {\n    container: HTMLElement | null;\n    layerTranslateDelta: Vector | undefined;\n    anchorTranslateDelta: Vector | undefined;\n    isAnchorDragging = false;\n    targetPoints: RectPoints;\n    anchorMoving: Anchor | undefined;\n    state: State = {\n        matrix: defaultMatrix,\n        translateDelta: _setDeltaVal(),\n        sourcePoints: undefined,\n        transformOrigin: [0, 0],\n        containerTranslate: [this.props.x || 0, this.props.y || 0],\n    };\n\n    componentDidMount() {\n        window.addEventListener(\"mousemove\", this.onAnchorMouseMove);\n        window.addEventListener(\"mousemove\", this.onMouseMove);\n        if (this.container) {\n            const { width, height } = this.container.getBoundingClientRect();\n            const sourcePoints = [\n                [0, 0],\n                [width, 0],\n                [width, height],\n                [0, height],\n            ] as RectPoints;\n            this.targetPoints = [...sourcePoints] as RectPoints;\n            this.setState({ sourcePoints });\n\n      if (localStorage.getItem(\"projMap\")) {\n                console.log(\"loading prev. projMap...\");\n                let ls: any = localStorage.getItem(\"projMap\");\n                this.setState(JSON.parse(ls));\n            }  \n\n\n        }\n    }\n    componentDidUpdate(prevProps: any, prevState: State) {\n\n            console.log(\"saving edited projMap...\", JSON.stringify(prevState));\n            // save whatever keystone was in state\n            localStorage.setItem(\"projMap\", JSON.stringify(prevState));\n      \n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"mousemove\", this.onAnchorMouseMove);\n        window.removeEventListener(\"mousemove\", this.onMouseMove);\n    }\n\n    onAnchorMouseDown = (evt: any, position: any) => {\n        evt.stopPropagation();\n        this.anchorTranslateDelta = [\n            evt.pageX - this.state.translateDelta[position][0],\n            evt.pageY - this.state.translateDelta[position][1],\n        ];\n\n        this.anchorMoving = position;\n    };\n\n    onAnchorMouseMove = (evt: any) => {\n        if (\n            !this.anchorTranslateDelta ||\n            !this.state.sourcePoints ||\n            !this.anchorMoving\n        ) {\n            return;\n        }\n        evt.preventDefault();\n        evt.stopPropagation();\n        const vectorIndexToModify = anchors.indexOf(this.anchorMoving);\n\n        const deltaX = evt.pageX - this.anchorTranslateDelta[0];\n        const deltaY = evt.pageY - this.anchorTranslateDelta[1];\n\n        this.targetPoints[vectorIndexToModify] = [\n            this.state.sourcePoints[vectorIndexToModify][0] + deltaX,\n            this.state.sourcePoints[vectorIndexToModify][1] + deltaY,\n        ];\n\n        this.setState({\n            matrix: transformPointsToMatrix(\n                this.state.sourcePoints,\n                this.targetPoints!\n            ),\n            translateDelta: {\n                ...this.state.translateDelta,\n                [this.anchorMoving]: [deltaX, deltaY],\n            },\n        });\n    };\n\n    onAnchorMouseUp = (position: any) => {\n        this.anchorTranslateDelta = undefined;\n        this.anchorMoving = undefined;\n    };\n\n    onMouseUp = () => {\n        this.layerTranslateDelta = undefined;\n    };\n\n    onMouseMove = (evt: any) => {\n        if (!this.layerTranslateDelta || !this.props.isEditMode) {\n            return;\n        }\n\n        const newVector: Vector = [\n            evt.pageX - this.layerTranslateDelta[0],\n            evt.pageY - this.layerTranslateDelta[1],\n        ];\n\n        this.setState({\n            containerTranslate: newVector,\n        });\n    };\n\n    onMouseDown = (evt: any) => {\n        const { containerTranslate } = this.state;\n        this.layerTranslateDelta = [\n            evt.pageX - containerTranslate[0],\n            evt.pageY - containerTranslate[1],\n        ];\n    };\n\n\n\n\n    render() {\n        const {\n            style,\n            isEditMode,\n            className,\n            anchorStyle,\n            anchorClassName,\n        } = this.props;\n        const {\n            translateDelta,\n            matrix,\n            containerTranslate,\n            transformOrigin,\n        } = this.state;\n\n        return (\n            <>\n              \n         \n\n                <div\n          \n                    onMouseDown={this.onMouseDown}\n                    onMouseUp={this.onMouseUp}\n                    style={{\n                        cursor: isEditMode ? \"all-scroll\" : \"inherit\",\n                        position: \"relative\",\n                        display: \"inline-block\",\n                        transform: vectorToTransform(containerTranslate),\n                    }}\n                >\n                    <div\n                        ref={(ref) => {\n                            this.container = ref;\n                        }}\n                        style={{\n                            ...styles.container,\n                            ...style,\n                            pointerEvents: isEditMode ? \"none\" : \"all\",\n                            transform: matrixToTransform(matrix),\n                            transformOrigin: `${transformOrigin[0]}px ${transformOrigin[1]}px 0px`,\n                        }}\n                        className={className}\n                    >\n                        {this.props.children}\n                    </div>\n                    {isEditMode && (\n                        <div>\n                            {anchors.map((anchor, index) => (\n                                <AnchorComponent\n                                    style={anchorStyle}\n                                    className={anchorClassName}\n                                    key={anchor}\n                                    translation={translateDelta[anchor]}\n                                    position={anchor}\n                                    onMouseDown={this.onAnchorMouseDown}\n                                    onMouseUp={this.onAnchorMouseUp}\n                                />\n                            ))}\n                        </div>\n                    )}\n                </div>\n            </>\n        );\n    }\n}\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nconst useStyles = makeStyles((theme) => ({\n    button: {\n        margin: theme.spacing(1),\n        position: \"fixed\",\n        bottom: \"1vh\",\n        zIndex: 1001,\n        maxWidth: \"50vw\",\n    },\n}));\n\nexport default function DeleteLocalStorage() {\n    const classes = useStyles();\n\n    return (\n        <Grid container alignItems=\"center\" justify=\"center\">\n            <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                className={classes.button}\n                startIcon={<DeleteIcon />}\n            >\n                Reset Projection Mapping\n            </Button>\n        </Grid>\n    );\n}\n","import { useState, useEffect } from 'react'\nimport PrjDeckGLMap from './PrjDeckGLMap'\nimport Keystoner from './Components/Keystoner'\nimport DeleteLocalStorage from './Components/deleteLocalStorage'\n\nexport default function Keystone() {\n  const [editMode, setEditMode] = useState(false)\n\n  const clearLocalStraoge = () => {\n    if (localStorage.getItem('projMap')) {\n      localStorage.removeItem('projMap')\n    }\n    if (localStorage.getItem('deckGLviewState')) {\n      localStorage.removeItem('deckGLviewState')\n    }\n    window.location.reload()\n  }\n\n  useEffect(() => {\n    const onKeyDown = ({ key }) => {\n      if (key === ' ') {\n        setEditMode((editMode) => !editMode)\n        console.log(key, editMode)\n      }\n    }\n    document.addEventListener('keydown', onKeyDown)\n    return () => {\n      document.removeEventListener('keydown', onKeyDown)\n    }\n  }, [editMode])\n\n  return (\n    <>\n      {editMode && (\n        <div onClick={() => clearLocalStraoge()}>\n          <DeleteLocalStorage />\n        </div>\n      )}\n\n      <div\n        // ! this div's props are\n        // ! controling the projection z-index\n        // ! on top of the menus\n\n        style={{\n          height: '100%',\n          width: '100vw',\n          overflow: 'hidden',\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          zIndex: 1000,\n        }}\n      >\n        <div>\n          <Keystoner\n            style={{\n              height: '100vh',\n              width: '100vw',\n            }}\n            isEditMode={editMode}\n          >\n            <PrjDeckGLMap />\n          </Keystoner>\n        </div>\n      </div>\n    </>\n  )\n}\n","import { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport settings from '../settings/settings.json'\nimport { Button } from '@material-ui/core/'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n    },\n  },\n}))\nexport default function TableNameInput({ setSelectedTable }) {\n  const classes = useStyles()\n  const [tableList, setTableList] = useState()\n\n  // https://stackoverflow.com/a/27098801/860099\n  function strToRemove(str, strToRemove) {\n    let start = str.indexOf(strToRemove)\n    return (\n      str.slice(0, start) + str.slice(start + strToRemove.length, str.length)\n    )\n  }\n\n  useEffect(() => {\n    /**\n     * Gets all tables on init\n     */\n    let buttonsArr = []\n    const cityIOlistURL = settings.cityIO.ListOfTables\n    const cityIOtableBaseUrl = settings.cityIO.baseURL\n\n    axios.get(cityIOlistURL).then((res) => {\n      res.data.forEach((urlStr) => {\n        const tableName = strToRemove(urlStr, cityIOtableBaseUrl)\n        buttonsArr.push(\n          <Button\n            key={Math.random()}\n            variant=\"outlined\"\n            color=\"secondary\"\n            onClick={() => {\n              axios\n                .get(cityIOtableBaseUrl + tableName + '/GEOGRID')\n                .then((res) => {\n                  if (res.status === 200) {\n                    setSelectedTable(tableName)\n                  }\n                })\n                .catch((err) => {\n                  console.log(err)\n                })\n            }}\n          >\n            {tableName}\n          </Button>,\n        )\n      })\n      setTableList(buttonsArr)\n    })\n  }, [setSelectedTable])\n\n  return <div className={classes.root}>{tableList}</div>\n}\n","import { useEffect } from 'react'\n\nimport { useDispatch } from 'react-redux'\nimport { setUIWebsocketData, setUIWebsocketReady } from '../../../redux/actions'\nimport settings from '../../../settings/settings.json'\n\n/*\nhttps://stackoverflow.com/questions/39728000/react-native-with-websocket-doesnt-work\n*/\n\nconst UIWebsocket = () => {\n  const dispatch = useDispatch()\n  useEffect(() => {\n    var socket = new WebSocket(settings.SOCKETS.URL)\n\n    socket.onopen = () => {\n      socket.send('CityScopeJS')\n      socket.onmessage = ({ data }) => {\n        dispatch(setUIWebsocketReady(true))\n        dispatch(setUIWebsocketData(JSON.parse(data)))\n      }\n    }\n  }, [dispatch])\n  return null\n}\n\nexport default UIWebsocket\n","import React, { useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport CityIO from './CityIO/'\nimport Keystone from './Keystone'\nimport { Container, Typography, makeStyles, Box } from '@material-ui/core'\nimport TableNameInput from '../../Components/TableNameInput'\nimport Page from '../../layouts/Page'\nimport UIWebsocket from './UIWebsocket'\n\nexport default function CityScopeJS() {\n  // wait for 'ready' flag from cityIO when app is ready to start\n  const isCityIOready = useSelector((state) => state.READY)\n  const isSocketUIready = useSelector((state) => state.UI_WEBSOCKET_READY)\n\n  const useStyles = makeStyles((theme) => ({\n    root: {\n      '& > *': {\n        margin: 'auto',\n        height: '100%',\n        paddingBottom: theme.spacing(3),\n        paddingTop: theme.spacing(3),\n      },\n    },\n  }))\n\n  const [selectedTable, setSelectedTable] = useState(null)\n\n  const ListOfTables = () => {\n    return (\n      <Container maxWidth=\"md\">\n        <Typography color=\"textPrimary\" variant=\"h1\">\n          Projection tool\n        </Typography>\n        <Box mt={'3em'} />\n        <Typography color=\"textPrimary\">\n          This tool is used to project and display CityScopeJS tables in passive\n          mode, such as projectors, TVs, or other non-interactive displays.\n        </Typography>\n        <Box mt={'2em'} />\n        <Typography color=\"textPrimary\" variant=\"caption\">\n          start by selecting your CityScopeJS project. Press 'Spacebar' to\n          toggle keystone. Note: Not all CityScope projects below are ready for\n          CityScopeJS.\n        </Typography>\n        <Box mt={'2em'} />\n        <TableNameInput setSelectedTable={setSelectedTable} />\n      </Container>\n    )\n  }\n\n  const classes = useStyles()\n  return (\n    <>\n      <UIWebsocket />\n      <Page className={classes.root} title=\"Keystone\">\n        {!isCityIOready && <ListOfTables />}\n        {selectedTable && <CityIO tableName={selectedTable} />}\n\n        {isCityIOready && isSocketUIready && <Keystone />}\n      </Page>\n    </>\n  )\n}\n","import { Navigate } from 'react-router-dom'\nimport MainLayout from './layouts/MainLayout'\nimport NotFoundView from './views/Errors/NotFoundView'\nimport GridEditor from './views/GridEditor'\nimport CityScopeJS from './views/CityScopeJS'\nimport ProjectionMapping from './views/ProjectionMapping'\n\nconst routes = [\n  {\n    path: '/',\n    element: <MainLayout />,\n    children: [\n      { path: '/', element: <CityScopeJS /> },\n      { path: '/editor/', element: <GridEditor /> },\n      { path: '/projection', element: <ProjectionMapping /> },\n      { path: '/cityioviewer', element: <Navigate to=\"/\" /> },\n\n      { path: '*', element: <Navigate to=\"/404\" /> },\n      { path: '404', element: <NotFoundView /> },\n    ],\n  },\n]\n\nexport default routes\n","import React from \"react\";\nimport { useRoutes } from \"react-router-dom\";\nimport { ThemeProvider } from \"@material-ui/core\";\nimport GlobalStyles from \"./theme/GlobalStyles\";\nimport theme from \"./theme\";\nimport routes from \"./routes\";\n\nconst App = () => {\n    const routing = useRoutes(routes);\n\n    return (\n        <ThemeProvider theme={theme}>\n            <GlobalStyles />\n            {routing}\n        </ThemeProvider>\n    );\n};\n\nexport default App;\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\n\nconst ProviderWrapper = ({ children, store }) => (\n    <Provider store={store}>{children}</Provider>\n);\n\nexport default ProviderWrapper;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\n\nimport App from \"./App\";\nimport Provider from \"./redux/Provider\";\nimport store from \"./redux/store\";\n\n// ! basename={process.env.PUBLIC_URL}\n\nReactDOM.render(\n    <Provider store={store}>\n        {/* https://github.com/facebook/create-react-app/issues/1765 */}\n        <HashRouter basename={process.env.PUBLIC_URL}>\n            <App />\n        </HashRouter>\n    </Provider>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}